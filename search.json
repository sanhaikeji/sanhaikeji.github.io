[{"title":"ç³–æœå…¬å›­ - é¢˜è§£","path":"/2025/12/27/P4070ç³–æœå…¬å›­/","content":"ç³–æœå…¬å›­ é¢˜è§£é¢˜ç›®å¤§æ„ç»™å®šä¸€æ£µ $n$ ä¸ªèŠ‚ç‚¹çš„æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ‰ä¸€ç§ç³–æœ $C_i$ (å…± m ç§)ã€‚æ¯ç§ç³–æœæœ‰ç¾å‘³å€¼ $V_i$ï¼Œå“å°ç¬¬ $k$ æ¬¡åŒç§ç³–æœçš„æ–°å¥‡æ„Ÿä¸º $W_k$ã€‚æ¸¸å®¢ä» $u$ èµ°åˆ° $v$ çš„æ„‰æ‚¦åº¦ä¸ºè·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹ $i$ çš„ $V_{C_i}$ Ã— $W_{count(C_i)}$ â€‹ä¹‹å’Œï¼Œå…¶ä¸­$count(C_i)$ æ˜¯æ­¤ç§ç³–æœåœ¨å½“å‰è·¯å¾„ä¸Šå‡ºç°çš„æ¬¡æ•°ã€‚éœ€è¦æ”¯æŒä¸¤ç§æ“ä½œï¼š ä¿®æ”¹æŸä¸ªèŠ‚ç‚¹çš„ç³–æœç§ç±»ã€‚æŸ¥è¯¢æŸæ¡è·¯å¾„çš„æ„‰æ‚¦åº¦ã€‚ ç®—æ³•åˆ†ææœ¬é¢˜æ˜¯ä¸€é“ç»å…¸çš„ æ ‘ä¸Šå¸¦ä¿®æ”¹è«é˜Ÿ é—®é¢˜ã€‚ä¸åºåˆ—è«é˜Ÿä¸åŒï¼Œæ ‘ä¸Šè«é˜Ÿéœ€è¦å¤„ç†æ ‘å½¢ç»“æ„ï¼Œé€šå¸¸ä½¿ç”¨æ¬§æ‹‰åºå°†æ ‘è½¬ä¸ºåºåˆ—ã€‚ä½†æœ¬è§£æ³•é‡‡ç”¨ DFNåºç»“åˆè·¯å¾„ç§»åŠ¨ çš„æ–¹å¼ï¼Œç›´æ¥å¤„ç†æ ‘ä¸Šè·¯å¾„ã€‚æ ¸å¿ƒæ€è·¯ï¼šDFNåºç»“åˆå¸¦ä¿®è«é˜Ÿ DFNåºé¢„å¤„ç†ï¼šé€šè¿‡DFSå¾—åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„DFNåºï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢åºï¼‰ï¼Œç”¨äºè«é˜Ÿçš„å—åˆ’åˆ†ã€‚è™½ç„¶DFNåºæœ¬èº«ä¸èƒ½ç›´æ¥è¡¨ç¤ºè·¯å¾„ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡DFNåºæ¥å¯¹æŸ¥è¯¢è¿›è¡Œæ’åºï¼Œä»è€Œä¼˜åŒ–æ—¶é—´å¤æ‚åº¦ã€‚ è·¯å¾„ç§»åŠ¨ï¼šä½¿ç”¨ work å‡½æ•°é€šè¿‡ä¸æ–­ç§»åŠ¨åˆ°çˆ¶èŠ‚ç‚¹æ¥æ”¹å˜å½“å‰è·¯å¾„ã€‚å¯¹äºè·¯å¾„ $(u, v)$ï¼Œé€šè¿‡ç§»åŠ¨ç«¯ç‚¹åˆ°LCAæ¥æ·»åŠ æˆ–ç§»é™¤èŠ‚ç‚¹ã€‚ å¤„ç†ä¿®æ”¹ï¼šå¢åŠ æ—¶é—´ç»´åº¦ $t$ï¼Œè®°å½•ä¿®æ”¹æ“ä½œã€‚åœ¨è«é˜Ÿç§»åŠ¨å·¦å³æŒ‡é’ˆæ—¶ï¼ŒåŒæ—¶ç§»åŠ¨æ—¶é—´æŒ‡é’ˆæ¥å¤„ç†ä¿®æ”¹ã€‚ LCAå¤„ç†ï¼šå…³é”®ç‚¹åœ¨äºï¼Œè·¯å¾„ç§»åŠ¨åï¼ŒLCAèŠ‚ç‚¹å¯èƒ½æœªè¢«åŒ…å«ï¼Œå› æ­¤éœ€è¦åœ¨è®¡ç®—ç­”æ¡ˆå‰ä¸´æ—¶æ·»åŠ LCAç‚¹ï¼Œè®¡ç®—åç§»é™¤ã€‚ å—å¤§å°è®¾ç½®ï¼šé€šå¸¸å– $B = n^{2/3}$ï¼Œæ€»æ—¶é—´å¤æ‚åº¦ä¸º $O(n^{5/3})$ã€‚ ä»£ç å®ç° (C++)#includebits/stdc++.h#define int long longusing namespace std;const int N = 200005;int n, M, m, dfn[N], idx, vv[N], ww[N], b[N], a[N], lg[N], f[N][20], d[N], res, ans[N];int B; // å—å¤§å°ï¼Œè®¾ç½®ä¸º n^(2/3)bitsetN ex; // æ ‡è®°èŠ‚ç‚¹æ˜¯å¦åœ¨å½“å‰è·¯å¾„ä¸­struct Query { int l, r, id, t; // æŸ¥è¯¢çš„å·¦å³ç«¯ç‚¹(èŠ‚ç‚¹ç¼–å·)ï¼ŒæŸ¥è¯¢idï¼Œæ—¶é—´æˆ³} q[N];struct Update { int pos, old_val, new_val, t; // ä¿®æ”¹ä½ç½®ï¼Œæ—§å€¼ï¼Œæ–°å€¼ï¼Œæ—¶é—´æˆ³} upd[N];vectorint v[N]; // é‚»æ¥è¡¨// è«é˜Ÿæ’åºå‡½æ•°ï¼šæŒ‰å·¦ç«¯ç‚¹çš„å—ã€å³ç«¯ç‚¹çš„å—ã€æ—¶é—´æˆ³æ’åºbool operator (Query x, Query y) { int bx = dfn[x.l] / B, by = dfn[y.l] / B; if (bx != by) return bx by; int cx = dfn[x.r] / B, cy = dfn[y.r] / B; if (cx != cy) return cx cy; return x.t y.t;}// DFSé¢„å¤„ç†ï¼šæ±‚DFNåºã€æ·±åº¦ã€çˆ¶èŠ‚ç‚¹ï¼Œå¹¶é¢„å¤„ç†å€å¢æ•°ç»„void dfs(int x, int fa) { dfn[x] = ++idx; d[x] = d[fa] + 1; f[x][0] = fa; for (int i = 1; i = lg[n]; i++) { f[x][i] = f[f[x][i-1]][i-1]; } for (auto to : v[x]) { if (to != fa) { dfs(to, x); } }}// LCAç®—æ³•ï¼šä½¿ç”¨å€å¢æ³•int lca(int x, int y) { if (d[x] d[y]) swap(x, y); int diff = d[x] - d[y]; for (int i = 0; diff; i++) { if (diff 1) x = f[x][i]; diff = 1; } if (x == y) return x; for (int i = lg[n]; i = 0; i--) { if (f[x][i] != f[y][i]) { x = f[x][i]; y = f[y][i]; } } return f[x][0];}// æ·»åŠ èŠ‚ç‚¹åˆ°å½“å‰è·¯å¾„void add(int x) { b[a[x]]++; // è¯¥ç³–æœç±»å‹å‡ºç°æ¬¡æ•°+1 res += vv[a[x]] * ww[b[a[x]]]; // å¢åŠ è´¡çŒ®}// ä»å½“å‰è·¯å¾„ç§»é™¤èŠ‚ç‚¹void del(int x) { res -= vv[a[x]] * ww[b[a[x]]]; // å‡å°‘è´¡çŒ® b[a[x]]--; // è¯¥ç³–æœç±»å‹å‡ºç°æ¬¡æ•°-1}// ç§»åŠ¨è·¯å¾„ç«¯ç‚¹ï¼šä»å½“å‰èŠ‚ç‚¹xç§»åŠ¨åˆ°ç›®æ ‡èŠ‚ç‚¹tvoid work(int x, int t) { int l = lca(x, t); // ä»xç§»åŠ¨åˆ°LCA while (x != l) { if (ex[x]) { ex[x] = 0; del(x); } else { ex[x] = 1; add(x); } x = f[x][0]; } // ä»tç§»åŠ¨åˆ°LCA x = t; while (x != l) { if (ex[x]) { ex[x] = 0; del(x); } else { ex[x] = 1; add(x); } x = f[x][0]; }}// æ‰§è¡Œä¿®æ”¹æ“ä½œvoid change(int x, int y) { if (ex[x]) { // å¦‚æœèŠ‚ç‚¹åœ¨å½“å‰è·¯å¾„ä¸­ï¼Œéœ€è¦æ›´æ–°è´¡çŒ® del(x); a[x] = y; add(x); } else { a[x] = y; // å¦åˆ™ç›´æ¥ä¿®æ”¹ }}signed main() { ios::sync_with_stdio(false); cin.tie(0); // è¾“å…¥å¤„ç† cin n M m; for (int i = 2; i = n; i++) { lg[i] = lg[i 1] + 1; } for (int i = 1; i = M; i++) cin vv[i]; for (int i = 1; i = n; i++) cin ww[i]; for (int i = 1; i n; i++) { int x, y; cin x y; v[x].push_back(y); v[y].push_back(x); } for (int i = 1; i = n; i++) cin a[i]; // DFSé¢„å¤„ç† idx = 0; dfs(1, 0); // è®¾ç½®å—å¤§å° B = pow(n, 2.0/3.0); if (B 1) B = 1; // å¤„ç†æ“ä½œ int qcnt = 0, ucnt = 0; for (int i = 1; i = m; i++) { int type, x, y; cin type x y; if (type == 0) { ucnt++; upd[ucnt] = {x, a[x], y, ucnt}; a[x] = y; // å…ˆåº”ç”¨ä¿®æ”¹ } else { qcnt++; q[qcnt] = {x, y, qcnt, ucnt}; } } // å›é€€æ‰€æœ‰ä¿®æ”¹ï¼Œæ¢å¤åˆå§‹çŠ¶æ€ for (int i = ucnt; i = 1; i--) { a[upd[i].pos] = upd[i].old_val; } // å¯¹æŸ¥è¯¢æ’åº sort(q + 1, q + qcnt + 1); // åˆå§‹åŒ–è«é˜Ÿ int l = 1, r = 1, t = 0; ex.reset(); memset(b, 0, sizeof(b)); res = 0; add(1); // åˆå§‹åŠ å…¥èŠ‚ç‚¹1 ex[1] = 1; // å¤„ç†æ¯ä¸ªæŸ¥è¯¢ for (int i = 1; i = qcnt; i++) { // ç§»åŠ¨è·¯å¾„ç«¯ç‚¹ work(l, q[i].l); l = q[i].l; work(r, q[i].r); r = q[i].r; // å¤„ç†æ—¶é—´ç»´åº¦ä¸Šçš„ä¿®æ”¹ while (t q[i].t) { t++; change(upd[t].pos, upd[t].new_val); } while (t q[i].t) { change(upd[t].pos, upd[t].old_val); t--; } // å¤„ç†LCAï¼šä¸´æ—¶æ·»åŠ LCAç‚¹ï¼Œè®¡ç®—ç­”æ¡ˆåç§»é™¤ int lc = lca(l, r); add(lc); ans[q[i].id] = res; del(lc); } // è¾“å‡ºç­”æ¡ˆ for (int i = 1; i = qcnt; i++) { cout ans[i] endl; } return 0;} å…³é”®ç‚¹è¯´æ˜DFNåºçš„ä½¿ç”¨ï¼šè™½ç„¶æœ¬è§£æ³•ä½¿ç”¨DFNåºè¿›è¡Œå—åˆ’åˆ†ï¼Œä½†è·¯å¾„ç§»åŠ¨æ˜¯é€šè¿‡èŠ‚ç‚¹è·³è½¬å®ç°çš„ï¼Œè€Œä¸æ˜¯å…¸å‹çš„æ¬§æ‹‰åºåŒºé—´ç§»åŠ¨ã€‚è¿™ç§æ–¹å¼æ›´ç›´è§‚ä½†å¯èƒ½æ•ˆç‡ç¨ä½ã€‚ è·¯å¾„ç§»åŠ¨å‡½æ•° workï¼šè¯¥å‡½æ•°é€šè¿‡ä¸æ–­ç§»åŠ¨åˆ°çˆ¶èŠ‚ç‚¹æ¥æ·»åŠ æˆ–ç§»é™¤è·¯å¾„ä¸Šçš„èŠ‚ç‚¹ï¼Œç¡®ä¿è·¯å¾„æ­£ç¡®å˜åŒ–ã€‚ LCAçš„å¤„ç†ï¼šç”±äºè·¯å¾„ç§»åŠ¨åLCAå¯èƒ½æœªè¢«åŒ…å«ï¼Œå› æ­¤éœ€è¦åœ¨è®¡ç®—ç­”æ¡ˆå‰ä¸´æ—¶æ·»åŠ LCAç‚¹ï¼Œè®¡ç®—åç«‹å³ç§»é™¤ã€‚è¿™æ˜¯è§£å†³WAçš„å…³é”®ã€‚ ä¿®æ”¹æ“ä½œçš„å¤„ç†ï¼šè®°å½•ä¿®æ”¹åºåˆ—ï¼Œå¹¶åœ¨æ—¶é—´ç»´åº¦ä¸Šç§»åŠ¨æ—¶æ‰§è¡Œæˆ–å›é€€ä¿®æ”¹ï¼Œç¡®ä¿æŸ¥è¯¢æ—¶æ•°æ®çŠ¶æ€æ­£ç¡®ã€‚ å¤æ‚åº¦åˆ†æï¼šé€šè¿‡è®¾ç½®å—å¤§å° $B = n^{2/3}$ï¼Œç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(n^{5/3})$ï¼Œèƒ½å¤Ÿé€šè¿‡æœ¬é¢˜çš„æ•°æ®è§„æ¨¡ã€‚ æ€»ç»“æœ¬é¢˜æ˜¯æ ‘ä¸Šå¸¦ä¿®è«é˜Ÿçš„å…¸å‹åº”ç”¨ã€‚ä¸åºåˆ—è«é˜Ÿç›¸æ¯”ï¼Œæ ‘ä¸Šè«é˜Ÿéœ€è¦å¤„ç†æ ‘å½¢ç»“æ„å’ŒLCAé—®é¢˜ã€‚æœ¬è§£æ³•é‡‡ç”¨DFNåºè¿›è¡Œå—åˆ’åˆ†ï¼Œç»“åˆè·¯å¾„ç§»åŠ¨å‡½æ•°å¤„ç†æ ‘ä¸Šè·¯å¾„ï¼Œé€šè¿‡ä¸´æ—¶æ·»åŠ LCAç‚¹ç¡®ä¿ç­”æ¡ˆæ­£ç¡®ã€‚æŒæ¡è¿™ç§æ ‘ä¸Šå¸¦ä¿®è«é˜Ÿçš„æŠ€å·§ï¼Œå¯¹äºè§£å†³å¤æ‚çš„æ ‘ä¸ŠæŸ¥è¯¢é—®é¢˜éå¸¸æœ‰å¸®åŠ©ã€‚å¯¹äºæƒ³è¦è¿›ä¸€æ­¥ä¼˜åŒ–çš„åŒå­¦ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨æ¬§æ‹‰åºå°†æ ‘è½¬ä¸ºåºåˆ—ï¼Œä»è€Œç›´æ¥åº”ç”¨åºåˆ—è«é˜Ÿçš„æ–¹æ³•ï¼Œä½†éœ€è¦æ³¨æ„å¤„ç†è·¯å¾„æ—¶çš„ç‰¹æ®Šæƒ…å†µã€‚","tags":["é¢˜è§£"],"categories":["é¢˜è§£"]},{"title":"æ–¹æ ¼æŸ“è‰² - é¢˜è§£","path":"/2025/12/25/P9478-NOI2023-æ–¹æ ¼æŸ“è‰²A/","content":"å­ä»»åŠ¡ A é¢˜è§£ï¼ˆçº¯æ°´å¹³æŸ“è‰²ï¼‰ è¯´å¥å®è¯ï¼Œæˆ‘å†™çš„é¢˜è§£çœŸçš„æ˜¯ä¸å¦‚AIã€‚é‚£ä¹ˆä½œä¸ºä¸€ä¸ªOIé€‰æ‰‹äººç±»ï¼Œæˆ‘ä»¬èƒ½åšçš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿåªæœ‰å¦‚ä½•æƒ³å‡ºæ¥çš„æ€è·¯ç½¢äº†ã€‚æ‰€ä»¥æœ¬ç¯‡é¢˜è§£ä¸»è¦æ³¨æ„çš„æ˜¯æ€æƒ³è¿‡ç¨‹ï¼Œä»¥åŠé‡åˆ°ä¸€é“é¢˜ç›®æ—¶æˆ‘çš„ååº”ã€‚ ä¸€ã€é¦–å…ˆ1.1 ä»é•¿é¢˜é¢ä¸­æå–çœ‹ç€å¾ˆé•¿ï¼Œæœ€å…³é”®çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿé‚£è‚¯å®šæ˜¯æç‚¼ï¼ˆè¯´äº†å¥åºŸè¯ï¼‰ã€‚ é€šè¿‡çœ‹é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ä»¥ä¸‹å…³é”®ç‚¹ï¼š âš ï¸ æ³¨æ„ï¼šå› ä¸ºæˆ‘ä»¬åªåšAï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦è€ƒè™‘æ¨ªçš„æƒ…å†µ æ‰€ä»¥æœ€åå°±å˜æˆäº†ï¼šä¸€å¼€å§‹å…¨ç™½ï¼Œç»™æ“ä½œï¼Œæ¯æ¬¡æŠŠä¸€è¡Œä¸­çš„ $[x_1, x_2]$ è¿™ä¸ªèŒƒå›´å˜é»‘ã€‚ å¥½çš„é‚£æˆ‘ä»¬å°±æˆåŠŸçš„å®Œæˆäº†ç¼©å°ï¼ˆæ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼‰ 1.2 çœ‹åˆ°é—®é¢˜é¦–å…ˆæƒ³åˆ°ä»€ä¹ˆï¼Ÿç¬¬ä¸€ååº”ï¼šè¿™æ˜¯ä¸€ä¸ªäºŒç»´å¹³é¢æŸ“è‰²é—®é¢˜ã€‚ä½†æ“ä½œä»…é™äºæ°´å¹³æ–¹å‘ï¼Œæ˜¾ç„¶ä¸åŒè¡Œä¹‹é—´åº”è¯¥æ²¡æœ‰å…³ç³»ã€‚ è®©æˆ‘ä»¬éªŒè¯è¿™ä¸ªæ˜¾ç„¶ï¼š æ“ä½œ1ï¼šæŸ“é»‘ç¬¬3è¡Œçš„[1,5] æ“ä½œ2ï¼šæŸ“é»‘ç¬¬5è¡Œçš„[2,4] ç¬¬3è¡Œçš„æ“ä½œä¼šå½±å“ç¬¬5è¡Œå—ï¼Ÿæ˜¾ç„¶ä¸ä¼š ğŸ’¡ æ ¸å¿ƒè§‚å¯Ÿï¼šä¸åŒè¡Œçš„æ“ä½œå®Œå…¨ç‹¬ç«‹ï¼æ¯è¡Œçš„æŸ“è‰²ç»“æœåªå–å†³äºè¯¥è¡Œçš„æ“ä½œé›†åˆã€‚ äºæ˜¯é—®é¢˜è½¬åŒ–ä¸ºï¼š å¯¹æ¯ä¸€è¡Œï¼Œå·²çŸ¥è‹¥å¹²åŒºé—´ $[x_1, x_2]$ï¼Œæ±‚è¢«è¦†ç›–çš„æ ¼å­æ€»æ•°ã€‚ äºŒã€é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æƒ³åˆ°ä»€ä¹ˆæ–¹æ³•å‘¢ ğŸ’¡ æç¤ºï¼šé¦–å…ˆæˆ‘ä»¬è¦è€ƒè™‘çš„æ˜¯ï¼šå› ä¸ºå¯èƒ½å‡ºç°ç›¸åŒçš„åœ°æ–¹é‡å¤æŸ“è‰²ï¼Œæ‰€ä»¥è‡ªç„¶ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³åˆ°ä»¥ä¸‹ç®—æ³• 2.1 æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•æ€è·¯ï¼šå¯¹æ¯è¡Œï¼Œåˆ›å»ºä¸€ä¸ªå¤§å°ä¸º $m$ çš„å¸ƒå°”æ•°ç»„ï¼Œéå†æ¯ä¸ªæ“ä½œï¼Œå°†å¯¹åº”ä½ç½®æ ‡è®°ä¸º trueï¼Œæœ€åç»Ÿè®¡ true çš„æ•°é‡ã€‚ ç¼ºç‚¹ï¼š$m \\le 10^9$ï¼Œæ•°ç»„å¤ªå¤§ï¼Œç©ºé—´çˆ†ç‚¸ã€‚ æš´åŠ› // æ­¤æ–¹æ³•ä»…ç”¨äºç†è§£é—®é¢˜#include bits/stdc++.husing namespace std;int main() { int c; long long n, m; int q; cin c n m q; //ç©ºé—´å ç”¨è¶…æ ‡ vectorvectorbool board(n + 1, vectorbool(m + 1, false)); for (int i = 0; i q; i++) { int t; long long x1, y1, x2, y2; cin t x1 y1 x2 y2; if (t == 1) { for (long long x = x1; x = x2; x++) { board[y1][x] = true; } } } long long ans = 0; for (int y = 1; y = n; y++) { for (long long x = 1; x = m; x++) { if (board[y][x]) ans++; } } cout ans endl; return 0;} 2.2 æ–¹æ³•äºŒï¼šçº¿æ®µæ ‘/æ ‘çŠ¶æ•°ç»„æ€è·¯ï¼šå¯¹æ¯è¡Œå»ºç«‹çº¿æ®µæ ‘æˆ–æ ‘çŠ¶æ•°ç»„ï¼Œæ”¯æŒåŒºé—´æŸ“è‰²å’ŒæŸ¥è¯¢ã€‚æ¯æ¬¡æ“ä½œè°ƒç”¨åŒºé—´æ›´æ–°ï¼Œæœ€åæŸ¥è¯¢æ•´è¡Œçš„è¦†ç›–é•¿åº¦ã€‚ ç¼ºç‚¹ï¼šéœ€è¦ä¸ºæ¯è¡Œç»´æŠ¤ä¸€æ£µçº¿æ®µæ ‘ï¼Œç©ºé—´å¤æ‚åº¦ $O(n \\cdot \\log m)$ æˆ–éœ€è¦åŠ¨æ€å¼€ç‚¹ï¼Œå®ç°å¤æ‚ä¸”æ•ˆç‡ä½ä¸‹ã€‚ çº¿æ®µ #include bits/stdc++.husing namespace std;struct SegTree { int n; vectorint tree, lazy; SegTree(int _n) { n = _n; tree.assign(4 * n + 5, 0); lazy.assign(4 * n + 5, 0); } void push(int node, int l, int r) { if (lazy[node]) { tree[node] = (r - l + 1); if (l != r) { lazy[node * 2] = lazy[node * 2 + 1] = 1; } lazy[node] = 0; } } void update(int node, int l, int r, int ul, int ur) { push(node, l, r); if (ul r || ur l) return; if (ul = l r = ur) { lazy[node] = 1; push(node, l, r); return; } int mid = (l + r) 1; update(node * 2, l, mid, ul, ur); update(node * 2 + 1, mid + 1, r, ul, ur); tree[node] = tree[node * 2] + tree[node * 2 + 1]; } int query() { return tree[1]; }};int main() { int c; long long n, m; int q; cin c n m q; // éœ€è¦ä¸ºæ¯è¡Œå»ºçº¿æ®µæ ‘ï¼Œç©ºé—´å¤ªå¤§ unordered_maplong long, SegTree* rowTrees; for (int i = 0; i q; i++) { int t; long long x1, y1, x2, y2; cin t x1 y1 x2 y2; if (t == 1) { if (rowTrees.find(y1) == rowTrees.end()) { rowTrees[y1] = new SegTree(m); } rowTrees[y1]-update(1, 1, m, x1, x2); } } long long ans = 0; for (auto p : rowTrees) { ans += p.second-query(); } cout ans endl; return 0;} 2.3 æ–¹æ³•ä¸‰ï¼šåŒºé—´åˆå¹¶æ³•æ€è·¯ï¼šå°†æ¯è¡Œçš„æ‰€æœ‰åŒºé—´æ”¶é›†èµ·æ¥ï¼Œæ’åºååˆå¹¶é‡å æˆ–ç›¸é‚»çš„åŒºé—´ï¼Œç›´æ¥è®¡ç®—å¹¶é›†é•¿åº¦ã€‚é‚£è¿™ä¸ªå°±æ˜¯æœ€åçš„ä»£ç äº†ï¼Œç›´æ¥çœ‹ä¸‹é¢æŠŠ ä¸‰ã€è¯¦ç»†å®ç°ï¼šåŒºé—´åˆå¹¶æ³•3.1 æ•´ä½“æµç¨‹1.è¯»å…¥å°†æ°´å¹³æ“ä½œï¼ˆ$t=1$ï¼‰ï¼Œå­˜å…¥æ•°ç»„ seg[]ã€‚ 2.æ’åºæŒ‰è¡Œå·hå¯¹ seg[] æ’åºï¼Œä½¿åŒä¸€è¡Œçš„åŒºé—´è¿ç»­ã€‚ 3.é€è¡Œå¤„ç†å¯¹æ¯ä¸€è¡Œæ‰§è¡Œï¼š å°†è¯¥è¡Œæ‰€æœ‰åŒºé—´å¤åˆ¶åˆ°ä¸´æ—¶æ•°ç»„ tmp[] æŒ‰å·¦ç«¯ç‚¹lå¯¹ tmp[] æ’åº åˆå¹¶æ‰«æï¼š ç»´æŠ¤å½“å‰åŒºé—´ [curL, curR] éå†æ’åºåçš„åŒºé—´ [L, R]ï¼š å¦‚æœ L = curR + 1ï¼šå¯åˆå¹¶ï¼ŒcurR = max(curR, R) å¦åˆ™ï¼šç»“ç®—å½“å‰åŒºé—´ï¼Œans += curR - curL + 1ï¼Œé‡ç½® [curL, curR] = [L, R] éå†ç»“æŸåå†ç»“ç®—æœ€åä¸€ä¸ªåŒºé—´ æ˜¯ä¸æ˜¯ç®€å•é«˜æ•ˆçš„æ–¹æ³•å‘¢ï½ å¤æ‚åº¦åˆ†æ æ—¶é—´ï¼šä¸»è¦å¼€é”€æ˜¯æ’åºã€‚æŒ‰è¡Œå·æ’åº $O(cnt \\log cnt)$ï¼Œæ¯è¡Œå†…éƒ¨æ’åºçš„æ€»é•¿åº¦ä¸è¶…è¿‡ $cnt$ï¼Œæ•…æ•´ä½“ $O(q \\log q)$ã€‚ ç©ºé—´ï¼šä¸¤ä¸ªå¤§å°ä¸º $q$ çš„é™æ€æ•°ç»„ seg[] å’Œ tmp[]ï¼Œç©ºé—´ $O(q)$ã€‚ CODE#include bits/stdc++.husing namespace std;struct QD { long long h;//è¡Œå· long long l;//å·¦ç«¯ç‚¹ long long r;//å³ç«¯ç‚¹};QD seg[100005];QD tmp[100005];// æŒ‰è¡Œå·æ’åºbool cmp1(const QD x, const QD y) { return x.h y.h;}// æŒ‰å·¦ç«¯ç‚¹æ’åºbool cmp2(const QD x, const QD y) { return x.l y.l;}int main() { int c; cin c; long long n, m; int q; cin n m q; int cnt = 0; for (int i = 0; i q; i++) { int t; long long x1, y1, x2, y2; cin t x1 y1 x2 y2; if (t == 1) { seg[cnt++] = {y1, x1, x2}; } } //æŒ‰è¡Œå·æ’åºï¼Œè®©åŒä¸€è¡Œçš„åŒºé—´è¿ç»­ sort(seg, seg + cnt, cmp1); long long ans = 0; //éå†æ¯ä¸€è¡Œ for (int i = 0; i cnt; ) { int j = i; // æ‰¾åˆ°åŒä¸€è¡Œçš„åŒºé—´ï¼ŒjæŒ‡å‘ä¸‹ä¸€è¡Œçš„å¼€å¤´ while (j cnt seg[j].h == seg[i].h) { j++; } //æŒ‰å·¦ç«¯ç‚¹æ’åº int len = j - i; for (int k = 0; k len; k++) { tmp[k] = seg[i + k]; } sort(tmp, tmp + len, cmp2); //åˆå¹¶åŒºé—´å¹¶ç´¯åŠ é•¿åº¦ long long curL = tmp[0].l; long long curR = tmp[0].r; for (int k = 1; k len; k++) { long long L = tmp[k].l; long long R = tmp[k].r; if (L = curR + 1) {//å¯åˆå¹¶ if (R curR) curR = R; } else {//ä¸èƒ½åˆå¹¶ï¼Œç»“ç®— ans += curR - curL + 1; curL = L; curR = R; } } ans += curR - curL + 1;//åˆ«å¿˜äº†æœ€åä¸€ä¸ªåŒºé—´ i = j;// è·³åˆ°ä¸‹ä¸€è¡Œ } cout ans endl; return 0;} ğŸŒ ç»“è¯­ OKå•Šï¼Œåˆ†æ‹¿åˆ°äº†ã€‚æœ¬é¢˜è§£ç»“æŸ","tags":["é¢˜è§£"],"categories":["é¢˜è§£"]},{"title":"Hello World","path":"/2025/12/25/hello-world/","content":"Welcome to Sanhaiâ€™s Blogs! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. å¿«é€Ÿå¼€å§‹æ–°å»ºä¸€ç¯‡æ–‡ç« $ hexo new \"My New Post\" More info: Writing å¼€å§‹æœåŠ¡$ hexo server More info: Server Generate static files$ hexo generate More info: Generating Deploy to remote sites$ hexo deploy More info: Deployment"},{"title":"å­¦ä¹ å°ç»„ - é¢˜è§£","path":"/2025/12/11/T706110å­¦ä¹ å°ç»„é¢˜è§£/","content":"T706110 å­¦ä¹ å°ç»„é¢˜æ„ç®€è¿°ç»™å®šé•¿åº¦ä¸º $ n $ï¼ˆ$ n \\leq 2 \\times 10^5 $ï¼‰çš„åºåˆ— $ s $ï¼Œç»Ÿè®¡æ»¡è¶³ä¸‹æ ‡ä¸¥æ ¼é€’å¢ä¸” $$s_i s_j s_k \\quad \\text{æˆ–} \\quad s_i s_j s_k$$ çš„ä¸‰å…ƒç»„ $ (i, j, k) $ çš„æ•°é‡ã€‚ ç®—æ³•æ€è·¯å°†ä¸‰å…ƒç»„é—®é¢˜è½¬åŒ–ä¸ºâ€œä¸­é—´äººâ€é—®é¢˜ï¼š å¯¹äºæ¯ä¸ªä½ç½® $ j $ï¼Œç»Ÿè®¡ï¼š å‰é¢æ¯” $ s_j $ å°çš„æ•°é‡ï¼š$ \\mathrm{preLess}[j] $ å‰é¢æ¯” $ s_j $ å¤§çš„æ•°é‡ï¼š$ \\mathrm{preGreater}[j] $ åé¢æ¯” $ s_j $ å°çš„æ•°é‡ï¼š$ \\mathrm{postLess}[j] $ åé¢æ¯” $ s_j $ å¤§çš„æ•°é‡ï¼š$ \\mathrm{postGreater}[j] $ åˆ™æ¯ä¸ªä½ç½® $ j $ çš„è´¡çŒ®ä¸ºï¼š $$\\mathrm{preLess}[j] \\times \\mathrm{postGreater}[j] + \\mathrm{preGreater}[j] \\times \\mathrm{postLess}[j]$$ æ€»ç­”æ¡ˆä¸ºæ‰€æœ‰ä½ç½®è´¡çŒ®ä¹‹å’Œã€‚ å®ç°æ–¹æ³• ç¦»æ•£åŒ–ï¼šå°†å€¼åŸŸæ˜ å°„åˆ°è¿ç»­åŒºé—´ï¼Œæ–¹ä¾¿æ ‘çŠ¶æ•°ç»„å¤„ç†ã€‚ æ ‘çŠ¶æ•°ç»„ï¼šä¸¤æ¬¡æ‰«æï¼ˆæ­£åº + å€’åºï¼‰ç»Ÿè®¡å‰åå…³ç³»ã€‚ ç´¯åŠ è´¡çŒ®ï¼šçº¿æ€§ç»Ÿè®¡æ¯ä¸ªä½ç½®çš„è´¡çŒ®ã€‚ å¤æ‚åº¦åˆ†æ æ—¶é—´å¤æ‚åº¦ï¼š$ O(n \\log n) $ ç©ºé—´å¤æ‚åº¦ï¼š$ O(n) $ å‚è€ƒä»£ç #include bits/stdc++.husing namespace std;using ll = long long;const int N = 2e5 + 10;int n, s[N], tmp[N], m;ll preL[N], preG[N], postL[N], postG[N], ans;int c[N];inline void add(int x, int v = 1) { for (; x = m; x += x -x) c[x] += v;}inline int ask(int x) { int s = 0; for (; x; x -= x -x) s += c[x]; return s;}int main() { ios::sync_with_stdio(false); cin.tie(nullptr); cin n; for (int i = 1; i = n; ++i) { cin s[i]; tmp[i] = s[i]; } // ç¦»æ•£åŒ– sort(tmp + 1, tmp + n + 1); m = unique(tmp + 1, tmp + n + 1) - tmp - 1; // æ­£åº for (int i = 1; i = n; ++i) { int r = lower_bound(tmp + 1, tmp + m + 1, s[i]) - tmp; preL[i] = ask(r - 1); preG[i] = ask(m) - ask(r); add(r); } // å€’åº memset(c, 0, sizeof(c)); for (int i = n; i = 1; --i) { int r = lower_bound(tmp + 1, tmp + m + 1, s[i]) - tmp; postL[i] = ask(r - 1); postG[i] = ask(m) - ask(r); add(r); } // ç´¯åŠ ç­”æ¡ˆ for (int i = 1; i = n; ++i) ans += preL[i] * postG[i] + preG[i] * postL[i]; cout ans ' '; return 0;} æç¤º æ ‘çŠ¶æ•°ç»„å¸¸æ•°è¾ƒå°ï¼Œå¯ç›´æ¥é€šè¿‡ã€‚ æ³¨æ„ç¦»æ•£åŒ–æ—¶å¤„ç†é‡å¤å€¼ã€‚","tags":["é¢˜è§£"],"categories":["é¢˜è§£"]},{"title":"é™æ°´ - é¢˜è§£","path":"/2025/12/04/T706068é™æ°´é¢˜è§£/","content":"é¢˜æ„ç†è§£ æœ‰ N åº§å±±å›´æˆä¸€åœˆï¼ˆN æ˜¯å¥‡æ•°ï¼‰ï¼Œæ¯åº§å±± i ä¼šä¸‹ $p_i$ å‡é›¨ã€‚è¿™äº›é›¨æ°´ä¼šå¹³å‡åˆ†ç»™å·¦å³ä¸¤ä¸ªå¤§åï¼šå·¦è¾¹çš„å¤§å i-1 å’Œå³è¾¹çš„å¤§å i å„å¾—åˆ° $p_i/2$ å‡ã€‚å¤§å i æ”¶é›†åˆ°çš„æ€»æ°´é‡å°±æ˜¯ $a_i$ã€‚ æ‰€ä»¥ $a_i$ å’Œ $p_i$ çš„å…³ç³»å°±æ˜¯ï¼š $$a_i = \\frac{p_i + p_{i+1}}{2}$$ ä¸¤è¾¹ä¹˜ 2ï¼š $$p_i + p_{i+1} = 2a_i \\tag{1}$$ æ ¸å¿ƒæ€è·¯ è¿™ä¸ªå¼å­å¾ˆå…³é”®ï¼å®ƒå‘Šè¯‰æˆ‘ä»¬ï¼šåªè¦çŸ¥é“ $p_i$ï¼Œå°±èƒ½ç®—å‡º $p_{i+1}$ï¼š $$p_{i+1} = 2a_i - p_i \\tag{2}$$ é—®é¢˜å°±å˜æˆäº†ï¼šæ€ä¹ˆæ±‚å‡º $p_1$ï¼Ÿ å› ä¸º N æ˜¯å¥‡æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ç»•ä¸€åœˆç”¨ $p_1$ æŠŠè‡ªå·±è¡¨ç¤ºå‡ºæ¥ã€‚ä» $p_1$ å¼€å§‹ï¼Œåå¤ç”¨å…¬å¼ (2) æ¨ä¸‹å»ï¼š $$\\begin{aligned}p_2 = 2a_1 - p_1 \\p_3 = 2a_2 - p_2 = 2a_2 - (2a_1 - p_1) = -2a_1 + 2a_2 + p_1 \\p_4 = 2a_3 - p_3 = 2a_3 - (-2a_1 + 2a_2 + p_1) = 2a_1 - 2a_2 + 2a_3 - p_1\\end{aligned}$$ æˆ‘ä»¬æ³¨æ„åˆ°ä¸€ä¸ªè§„å¾‹ï¼šå¥‡æ•°é¡¹æ˜¯ $p_1$ åŠ ä¸Šä¸€å † $\\pm 2a_i$ï¼Œå¶æ•°é¡¹æ˜¯ $-p_1$ åŠ ä¸Šä¸€å † $\\pm 2a_i$ã€‚ å› ä¸º N æ˜¯å¥‡æ•°ï¼Œæ‰€ä»¥ $p_N$ ä¹Ÿæ˜¯å¥‡æ•°é¡¹ï¼Œå¯ä»¥å†™æˆï¼š $$p_N = p_1 + 2(a_1 - a_2 + a_3 - a_4 + \\dots - a_{N-1})$$ æ³¨æ„æœ€åä¸€ä¸ªæ–¹ç¨‹ (1) å½“ $i=N$ æ—¶æ˜¯ï¼š $$p_N + p_1 = 2a_N$$ æŠŠ $p_N$ çš„è¡¨è¾¾å¼ä»£å…¥ï¼š $$(p_1 + 2(a_1 - a_2 + \\dots - a_{N-1})) + p_1 = 2a_N$$ ä¸¤è¾¹é™¤ä»¥ 2ï¼Œå¾—åˆ°ï¼š $$p_1 = a_N - a_1 + a_2 - a_3 + \\dots + a_{N-1}$$ ä¹Ÿå°±æ˜¯ï¼š $$p_1 = a_N + \\sum_{i=1}^{N-1} (-1)^{i+1} a_i$$ ç®—æ³•æµç¨‹ ç”¨å…¬å¼ç®—å‡º $p_1$ ä» $i=1$ åˆ° $N-1$ï¼Œç”¨é€’æ¨å¼ $p_{i+1} = 2a_i - p_i$ ç®—å‡ºæ‰€æœ‰ $p_i$ å¤æ‚åº¦æ˜¯ $O(N)$ æ—¶é—´ï¼Œ$O(N)$ ç©ºé—´ï¼ˆå­˜ $a_i$ å’Œ $p_i$ æ•°ç»„ï¼‰ã€‚ ä»£ç å®ç° #include bits/stdc++.husing namespace std;long long a[100005];long long p[100005];int main() { ios::sync_with_stdio(false); cin.tie(nullptr); int N; cin N; for (int i = 0; i N; ++i) cin a[i]; // è®¡ç®— p1ï¼šäº¤é”™å’Œ long long p1 = a[N]; // å…ˆæ”¾ a_N int sign = +1; // a_1 çš„ç³»æ•°æ˜¯ +1 for (int i = 0; i N - 1; ++i) { p1 += sign * a[i]; sign = -sign; // æ­£è´Ÿäº¤æ›¿ } p[0] = p1; for (int i = 1; i N; ++i) { p[i] = 2LL * a[i - 1] - p[i - 1]; } for (int i = 0; i N; ++i) { if (i) cout ' '; cout p[i]; } cout ' '; return 0;} ä¸€äº›å°ç»†èŠ‚ æ•°æ®èŒƒå›´æœ€å¤§åˆ° $10^9$ï¼ŒN æœ€å¤§åˆ° $10^5-1$ï¼Œæ‰€ä»¥ $p_i$ å¯èƒ½å¾ˆå¤§ï¼Œè¦ç”¨ long long N æ˜¯å¥‡æ•°è¿™ä¸ªæ¡ä»¶éå¸¸å…³é”®ï¼Œå¦‚æœ N æ˜¯å¶æ•°ï¼Œæ–¹ç¨‹ç»„å¯èƒ½æ— è§£æˆ–æœ‰æ— ç©·å¤šè§£","tags":["é¢˜è§£"],"categories":["é¢˜è§£"]},{"title":"æœ€å°çš„x - é¢˜è§£","path":"/2025/12/04/T706109æœ€å°çš„xé¢˜è§£/","content":"é¢˜è§£æ€è·¯ é¢˜ç›®è¦æ±‚æœ€å°çš„æ­£æ•´æ•° $x$ï¼Œä½¿å¾— $n+x^2$ æ˜¯ä¸€ä¸ªå®Œå…¨å¹³æ–¹æ•°ã€‚ è®¾ $y^2=n+x^2$ï¼Œç§»é¡¹åå¹³æ–¹å·®å…¬å¼ç›´æ¥å¸¦èµ°ï¼š $$y^2-x^2=n \\implies (y-x)(y+x)=n$$ ä»¤ $a=y-x$, $b=y+x$ï¼Œåˆ™ $a\\cdot b=n$ã€‚æ˜¾ç„¶ $ab$ï¼Œè€Œä¸”å› ä¸º $x,b,y$ éƒ½æ˜¯æ•´æ•°ï¼Œ$a$ å’Œ $b$ å¿…é¡»åŒå¥‡å¶ï¼ˆåŒä¸ºå¥‡æ•°æˆ–åŒä¸ºå¶æ•°ï¼‰ã€‚ ä¸€æ—¦æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„å› å­å¯¹ $(a,b)$ï¼Œå°±æœ‰ $$x=\\frac{b-a}{2},\\quad y=\\frac{a+b}{2}$$ ä¸ºäº†è®© $x$ æœ€å°ï¼Œéœ€è¦ $b-a$ æœ€å°ã€‚æ³¨æ„åˆ° $b=n/a$ï¼Œ$a$ è¶Šå¤§ï¼Œ$b$ è¶Šå°ï¼Œå·®å°±è¶Šå°ã€‚æ‰€ä»¥æˆ‘ä»¬ä» $\\lfloor\\sqrt n\\rfloor$ å¼€å§‹å€’åºæšä¸¾ $a$ï¼Œç¬¬ä¸€ä¸ªåˆæ³•çš„å› å­å¯¹ä¸€å®šå¯¹åº”æœ€å°çš„ $x$ã€‚ æ— è§£ ä¸¤ä¸ªåŒå¥‡å¶æ€§çš„æ•°ç›¸ä¹˜ï¼Œç»“æœè¦ä¹ˆæ˜¯å¥‡æ•°ï¼Œè¦ä¹ˆæ˜¯ 4 çš„å€æ•°ã€‚æ‰€ä»¥å¦‚æœ $n\\equiv 2\\pmod 4$ï¼Œä¸€å®šæ— è§£ã€‚ å¦å¤–ï¼Œ$n=1$ å’Œ $n=4$ æ—¶ï¼Œå”¯ä¸€çš„å› å­å¯¹æ˜¯ $(1,1)$ æˆ– $(2,2)$ï¼Œç®—å‡ºæ¥ $x=0$ï¼Œä¸ç¬¦åˆæ­£æ•´æ•°è¦æ±‚ã€‚è¿™ä¸¤ç§æƒ…å†µç›´æ¥è¾“å‡º $-1$ã€‚ å…¶ä½™æƒ…å†µå¿…ç„¶æœ‰è§£ã€‚ ä»£ç  long long n; cinn;if (n%4==2 || n==1 || n==4) { cout-1; return 0; }long long ans=-1;for (long long a=sqrt(n); a=1; --a) { if (n%a!=0) continue; long long b=n/a; if ((a%2)==(b%2) ab) { ans=(b-a)/2; break; }}coutans;","tags":["é¢˜è§£"],"categories":["é¢˜è§£"]},{"title":"Sanhai-loading","path":"/2025/11/29/Sanhai-loading/","content":"âœ… ä¸€ã€æ’ä»¶ç›®å½•ï¼ˆå®˜æ–¹ç»“æ„ï¼‰/root/addon/sanhai-loading/â”œâ”€â”€ package.jsonâ”œâ”€â”€ template.yamlâ”œâ”€â”€ index.jsâ”œâ”€â”€ templates/â”‚ â””â”€â”€ partials/â”‚ â””â”€â”€ loading.htmlâ””â”€â”€ static/ â””â”€â”€ sanhai-loading.css âœ… äºŒã€æ ¸å¿ƒæ–‡ä»¶package.json { \"name\": \"sanhai-loading\", \"version\": \"1.0.0\", \"description\": \"SanhaiOJ 7 æ¬¾å¼¹æ€§åŠ è½½åŠ¨ç”» Â· åå°å¯åˆ‡æ¢\", \"main\": \"index.js\", \"template\": true, \"style\": true} template.yaml partials/loading.html: ./templates/partials/loading.html index.js module.exports = async function (ctx) { // åå°é…ç½®é¡¹ï¼ˆåŠ¨ç”»ç±»å‹ + é€Ÿåº¦ï¼‰ ctx.config.set('sanhai_loading_type', 'dots', true); ctx.config.set('sanhai_loading_speed', 1, true);}; âœ… ä¸‰ã€æ¨¡æ¿æ–‡ä»¶ï¼ˆå®˜æ–¹è·¯å¾„ï¼‰templates/partials/loading.html !-- SanhaiOJ å¼¹æ€§åŠ è½½åŠ¨ç”» Â· 7 é€‰ 1 --div id=\"sanhai-loading\" class=\"sanhai-loader {{ config.get('sanhai_loading_type', 'dots') }}\" style=\"--speed:{{ config.get('sanhai_loading_speed', 1) }}s\"/divlink rel=\"stylesheet\" href=\"{{ url('static', 'sanhai-loading.css') }}\" âœ… å››ã€é›†ä¸­æ ·å¼ï¼ˆ7 æ¬¾åŠ¨ç”»ï¼‰static/sanhai-loading.css /* ---- åŸºç¡€è¦†ç›– ---- */#sanhai-loading{ position:fixed;inset:0;z-index:9999; display:flex;align-items:center;justify-content:center; background:#fff; /* å®˜æ–¹ç™½åº• */ --speed:1s; /* åå°é€Ÿåº¦å˜é‡ */}/* ---- 7 æ¬¾åŠ¨ç”» ---- */.sanhai-loader.dots{ display:flex;gap:8px;}.sanhai-loader.dots::before,.sanhai-loader.dots::after,.sanhai-loader.dots{ content:'';width:10px;height:10px;background:#165DFF;border-radius:50%; animation:dotsJump var(--speed) cubic-bezier(.45,.03,.51,1.4) infinite;}.sanhai-loader.dots::before{animation-delay:.1s;}.sanhai-loader.dots::after{animation-delay:.2s;}@keyframes dotsJump{0%,80%,100%{transform:translateY(0) scale(1);}40%{transform:translateY(-12px) scale(1.2);}}.sanhai-loader.ring{ width:40px;height:40px;border:4px solid #165DFF;border-top-color:transparent;border-radius:50%; animation:ringElastic var(--speed) cubic-bezier(.68,-.55,.27,1.55) infinite;}@keyframes ringElastic{0%{transform:rotate(0deg) scale(1);}50%{transform:rotate(180deg) scale(1.2);}100%{transform:rotate(360deg) scale(1);}}.sanhai-loader.bar{ display:flex;gap:4px;height:32px;align-items:flex-end;}.sanhai-loader.bar::before,.sanhai-loader.bar::after,.sanhai-loader.bar{ content:'';width:6px;height:100%;background:#165DFF;border-radius:3px; animation:barElastic var(--speed) cubic-bezier(.45,.03,.51,1.4) infinite;}.sanhai-loader.bar::before{animation-delay:.1s;}.sanhai-loader.bar::after{animation-delay:.2s;}@keyframes barElastic{0%,80%,100%{height:20%;}40%{height:100%;}}.sanhai-loader.pulse{ width:40px;height:40px;background:#165DFF;border-radius:50%; animation:pulseElastic var(--speed) cubic-bezier(.68,-.55,.27,1.55) infinite;}@keyframes pulseElastic{0%{transform:scale(0.95);opacity:1;}50%{transform:scale(1.3);opacity:0.7;}100%{transform:scale(0.95);opacity:1;}}.sanhai-loader.orbit{ position:relative;width:40px;height:40px;}.sanhai-loader.orbit::before,.sanhai-loader.orbit::after{ content:'';position:absolute;top:0;left:0;width:100%;height:100%;border:3px solid #165DFF;border-radius:50%; animation:orbitElastic var(--speed) cubic-bezier(.45,.03,.51,1.4) infinite;}.sanhai-loader.orbit::after{animation-delay:.2s;border-color:#14C4D9;}@keyframes orbitElastic{0%{transform:scale(1);opacity:1;}50%{transform:scale(0.3);opacity:0;}100%{transform:scale(1);opacity:1;}}.sanhai-loader.text{ font-size:20px;font-weight:600;color:#165DFF;letter-spacing:2px; animation:textElastic var(--speed) cubic-bezier(.68,-.55,.27,1.55) infinite;}@keyframes textElastic{0%,100%{transform:scale(1);}50%{transform:scale(1.15);}}.sanhai-loader.arc{ width:40px;height:40px;background:transparent; background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath d='M24 4 A20 20 0 1 1 24 44' stroke='%23165DFF' stroke-width='4' fill='none' stroke-linecap='round' stroke-dasharray='94.2' stroke-dashoffset='94.2'/%3E%3C/svg%3E\"); animation:arcElastic var(--speed) cubic-bezier(.68,-.55,.27,1.55) infinite;}@keyframes arcElastic{0%{stroke-dashoffset:94.2;transform:rotate(0deg);}50%{stroke-dashoffset:0;transform:rotate(540deg);}100%{stroke-dashoffset:94.2;transform:rotate(1080deg);}} âœ… äº”ã€å¯ç”¨ åå°é…ç½®hydrooj addon add /root/addon/sanhai-loadingpm2 restart hydrooja è¿›å…¥ ç®¡ç†åå° â†’ ç³»ç»Ÿ â†’ é…ç½®ï¼Œæ–°å¢ä¸¤é¡¹ï¼š é”® å€¼ è¯´æ˜ sanhai_loading_type dots / ring / bar / pulse / orbit / text / arc 7 æ¬¾åŠ¨ç”»å¯é€‰ sanhai_loading_speed 0.5 ~ 3ï¼ˆç§’ï¼‰ å®æ—¶è°ƒé€Ÿ åˆ·æ–°ä»»æ„é¡µé¢ â†’ å®˜æ–¹ partials/loading.html å·²è¢«æ’ä»¶æ›¿æ¢ï¼Œå‡çº§æ— æŸã€‚ é€‚ç”¨é€‰æ‹©é¡µé¢!DOCTYPE htmlhtml lang=\"zh-CN\"head meta charset=\"UTF-8\" titleSanhaiOJ åŠ è½½åŠ¨ç”»å®éªŒå®¤ï¼ˆç™½åº•å®Œæ•´ï¼‰/title meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" style :root{--speed:1s;--accent:#165DFF;} *{box-sizing:border-box;margin:0;padding:0;} body{ min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center; background:#ffffff;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif; padding:40px 24px; } header{font-size:24px;font-weight:600;margin-bottom:24px;color:#165DFF;} /* é€Ÿåº¦æ»‘å— */ .control-bar{margin-bottom:24px;font-size:14px;color:#4e5969;display:flex;align-items:center;gap:8px;} input[type=\"range\"]{width:160px;cursor:pointer;} #speedValue{display:inline-block;width:40px;text-align:center;font-weight:600;color:#165DFF;} /* å®¹å™¨å¸ƒå±€ï¼ˆåŸæ’åˆ—æ–¹å¼ï¼‰ */ .container{display:flex;gap:24px;flex-wrap:wrap;justify-content:center;} /* å¡ç‰‡æ ·å¼ï¼ˆç™½åº•ï¼‰ */ .card{ width:160px;height:160px;border-radius:8px;background:#f7f8fa;border:1px solid #e5e6eb; display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer; transition:transform .25s ease,box-shadow .25s ease; } .card:hover{transform:translateY(-4px);box-shadow:0 4px 12px rgba(22,93,255,.15);} .label{margin-top:8px;font-size:13px;color:#4e5969;} /* åŠ¨ç”»é›†åˆï¼ˆç¡®ä¿å…ƒç´ å¯è§ï¼‰ */ .dots{display:flex;gap:8px;} .dots span{width:10px;height:10px;background:#165DFF;border-radius:50%;animation:dotsJump var(--speed) cubic-bezier(.45,.03,.51,1.4) infinite;} .dots span:nth-child(2){animation-delay:.1s;} .dots span:nth-child(3){animation-delay:.2s;} @keyframes dotsJump{0%,80%,100%{transform:translateY(0) scale(1);}40%{transform:translateY(-12px) scale(1.2);}} .ring{width:40px;height:40px;border:4px solid #165DFF;border-top-color:transparent;border-radius:50%;animation:ringElastic var(--speed) cubic-bezier(.68,-.55,.27,1.55) infinite;} @keyframes ringElastic{0%{transform:rotate(0deg) scale(1);}50%{transform:rotate(180deg) scale(1.2);}100%{transform:rotate(360deg) scale(1);}} .bar{display:flex;gap:4px;height:32px;align-items:flex-end;} .bar span{width:6px;height:100%;background:#165DFF;border-radius:3px;animation:barElastic var(--speed) cubic-bezier(.45,.03,.51,1.4) infinite;} .bar span:nth-child(2){animation-delay:.1s;} .bar span:nth-child(3){animation-delay:.2s;} .bar span:nth-child(4){animation-delay:.3s;} .bar span:nth-child(5){animation-delay:.4s;} @keyframes barElastic{0%,80%,100%{height:20%;}40%{height:100%;}} .pulse{width:40px;height:40px;background:#165DFF;border-radius:50%;animation:pulseElastic var(--speed) cubic-bezier(.68,-.55,.27,1.55) infinite;} @keyframes pulseElastic{0%{transform:scale(0.95);opacity:1;}50%{transform:scale(1.3);opacity:0.7;}100%{transform:scale(0.95);opacity:1;}} .orbit{position:relative;width:40px;height:40px;} .orbit::before,.orbit::after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;border:3px solid #165DFF;border-radius:50%;animation:orbitElastic var(--speed) cubic-bezier(.45,.03,.51,1.4) infinite;} .orbit::after{animation-delay:.2s;border-color:#14C4D9;} @keyframes orbitElastic{0%{transform:scale(1);opacity:1;}50%{transform:scale(0.3);opacity:0;}100%{transform:scale(1);opacity:1;}} .text{font-size:20px;font-weight:600;color:#165DFF;letter-spacing:2px;animation:textElastic var(--speed) cubic-bezier(.68,-.55,.27,1.55) infinite;} @keyframes textElastic{0%,100%{transform:scale(1);}50%{transform:scale(1.15);}} .arc svg{animation:arcElastic var(--speed) cubic-bezier(.68,-.55,.27,1.55) infinite;} @keyframes arcElastic{0%{stroke-dashoffset:94.2;transform:rotate(0deg);}50%{stroke-dashoffset:0;transform:rotate(540deg);}100%{stroke-dashoffset:94.2;transform:rotate(1080deg);}} /style script const root=document.documentElement; const range=document.getElementById('speedRange'); const value=document.getElementById('speedValue'); range.oninput=()={ const v=parseFloat(range.value).toFixed(1); root.style.setProperty('--speed',v+'s'); value.textContent=v; }; /script/headbody headerSanhaiOJ åŠ è½½åŠ¨ç”»å®éªŒå®¤ï¼ˆç™½åº•å®Œæ•´ï¼‰/header div class=\"control-bar\" label for=\"speedRange\"é€Ÿåº¦ï¼š/label input type=\"range\" id=\"speedRange\" min=\"0.5\" max=\"3\" step=\"0.1\" value=\"1\" span id=\"speedValue\"1.0/span /div div class=\"container\" !-- 1. ç‚¹è·³ -- div class=\"card\" data-anim=\"dots\" div class=\"dots\"span/spanspan/spanspan/span/div span class=\"label\"Dots/span /div !-- 2. åœ†ç¯ -- div class=\"card\" data-anim=\"ring\" div class=\"ring\"/div span class=\"label\"Ring/span /div !-- 3. æŸ±çŠ¶ -- div class=\"card\" data-anim=\"bar\" div class=\"bar\"span/spanspan/spanspan/spanspan/spanspan/span/div span class=\"label\"Bar/span /div !-- 4. è„‰å†² -- div class=\"card\" data-anim=\"pulse\" div class=\"pulse\"/div span class=\"label\"Pulse/span /div !-- 5. è½¨é“ -- div class=\"card\" data-anim=\"orbit\" div class=\"orbit\"/div span class=\"label\"Orbit/span /div !-- 6. æ–‡å­— -- div class=\"card\" data-anim=\"text\" div class=\"text\"SanhaiOJ/div span class=\"label\"Text/span /div !-- 7. å¼§å½¢å›æ—‹ -- div class=\"card\" data-anim=\"arc\" div class=\"arc\"svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"path d=\"M24 4 A20 20 0 1 1 24 44\" stroke=\"#165DFF\" stroke-width=\"4\" fill=\"none\" stroke-linecap=\"round\" stroke-dasharray=\"94.2\" stroke-dashoffset=\"94.2\"//svg/div span class=\"label\"Arc/span /div /div script const root=document.documentElement; const range=document.getElementById('speedRange'); const value=document.getElementById('speedValue'); range.oninput=()={ const v=parseFloat(range.value).toFixed(1); root.style.setProperty('--speed',v+'s'); value.textContent=v; }; /script/body/html","tags":["SanhaiOJåŠ è½½åŠ¨ç”»"],"categories":["æ’ä»¶","OJ"]},{"title":"Samçš„æ‰“å­—è®¡åˆ’ - é¢˜è§£","path":"/2025/11/27/Samçš„æ‰“å­—è®¡åˆ’/","content":"T4 Samçš„æ‰“å­—è®¡åˆ’ - é¢˜è§£ä¸€çœ‹æ•°æ®å°±çŸ¥é“å¯ä»¥æœï¼Œä½†æ˜¯æš´åŠ›æœç´¢æœ‰ $O(9^9)$ ç›´æ¥ $TLE$ äº†ã€‚ ä½†æ˜¯è¿™é“é¢˜æ˜¯æ²¡æœ‰åŠæ³•è¿›è¡Œå‰ªææˆ–è€…ä¼˜åŒ–çš„ï¼Œé‚£ä¹ˆå…¶å®è™½ç„¶æ˜¯æœç´¢ï¼Œä½†æœ¬è´¨æ˜¯æšä¸¾ã€‚ æšä¸¾æ‰€æœ‰æ–¹æ¡ˆæœ‰ä¸ªä¼˜åŒ–ï¼Œå«æŠ˜åŠæœç´¢ï¼Œæ ‡å‡†çš„ç©ºé—´æ¢æ—¶é—´çš„æ€è·¯ã€‚ å…ˆæšä¸¾å‰ $5$ ä¸ªæ•°å­—ä¼šå¯¼è‡´çš„æ‰€æœ‰å±€é¢ï¼Œå†æšä¸¾å $5$ ä¸ªæ•°å­—ä¼šå¯¼è‡´çš„æ‰€æœ‰å±€é¢ã€‚ ä¸Šä¸‹åŒ¹é…å°±å¯ä»¥å°†å¤æ‚åº¦é™ä½åˆ° $O(2\\times9^5)$ã€‚ å½“ç„¶è¿™é“é¢˜è¿˜æœ‰ç¬¬äºŒç§åšæ³•ï¼š å°†è¿™ä¸ª $5\\times4$ çš„æ–¹æ ¼åˆ†æˆ $13$ ä¸ªåŒºå—ï¼š 1 2 2 34 . . 56 7 7 89 . . 1011 12 12 13 æ¯ä¸ªåŒºå—çš„è¦†ç›–æ¬¡æ•°ä¸º $a[i]$ã€‚ ä¸éš¾å‘ç° $a[13]$ æ‰€æœ‰æ•°å­—éƒ½ä¼šç”¨ï¼Œè€Œ $a[1]$ åªæœ‰ $1$ ä¸ä¼šç”¨ï¼Œæ‰€ä»¥ $cnt[1]=a[13]-a[1]$ã€‚ åŒç†ï¼š $a[6]$ åªæœ‰ $1,7$ ä¸ç”¨ï¼Œé‚£ä¹ˆ $a[6]=a[13]-cnt[1]-cnt[7]$ï¼Œå³ $cnt[7]=a[13]-a[6]-cnt[1]$ã€‚ $a[2]$ åªæœ‰ $1,4$ ä¸ç”¨ï¼Œé‚£ä¹ˆ $a[2]=a[13]-cnt[1]-cnt[4]$ï¼Œå³ $cnt[4]=a[13]-a[2]-cnt[1]$ã€‚ $a[10]$ åªæœ‰ $2$ ä¸ç”¨ï¼Œé‚£ä¹ˆ $a[10]=a[13]-cnt[2]$ï¼Œå³ $cnt[2]=a[13]-a[10]$ã€‚ $a[4]$ åªæœ‰ $1,2,3,7$ ä¸ç”¨ï¼Œé‚£ä¹ˆ $a[4]=a[13]-cnt[1]-cnt[2]-cnt[3]-cnt[7]$ï¼Œè§£å¾— $cnt[3]$ã€‚ $a[7]$ åªæœ‰ $1,7,0$ ä¸ç”¨ï¼Œè§£å¾— $cnt[0]$ã€‚ ç»¼ä¸Šï¼Œ$cnt[1],cnt[2],cnt[3],cnt[4],cnt[7],cnt[0]$ å¯ä»¥ç›´æ¥ç®—å‡ºã€‚æ¥ä¸‹æ¥åªéœ€è¦è®¡ç®— $5,6,8,9$ã€‚ $a[5]$ åªæœ‰ $5,6$ ä¸ç”¨ï¼Œè§£å¾— $cnt[5]+cnt[6]$ çš„å€¼ï¼Œè®¾ä¸º $x$ã€‚ $a[9]$ åªæœ‰ $2,6,8,0$ ä¼šç”¨ï¼Œå³ $a[9]=cnt[2]+cnt[6]+cnt[8]+cnt[0]$ï¼Œè§£å¾— $cnt[6]+cnt[8]$ï¼Œè®¾ä¸º $y$ã€‚ åˆå› ä¸º $cnt[5]+cnt[6]+cnt[8]+cnt[9]=a[13]-cnt[1]-cnt[2]-cnt[3]-cnt[4]-cnt[7]-cnt[0]$ï¼Œè®¾ä¸º $z$ï¼Œæ‰€ä»¥æˆ‘ä»¬ç°åœ¨æœ‰ä¸‰ä¸ªæ–¹ç¨‹å››ä¸ªæœªçŸ¥æ•°ã€‚ è¦è®© $cnt[5]$ æœ€å°ï¼Œåˆ™æœ€å¤§åŒ– $cnt[6]$ï¼Œè€Œ $cnt[6]=x+y-z+cnt[9]$ï¼Œåˆ™ $\\max{cnt[6]}=\\min(9,\\min(x+y-z+9,min(x,y)))$ã€‚ å†åˆ©ç”¨ä¹‹å‰çš„ $x,y,z$ å¯è§£å¾—æ‰€æœ‰æ•°å­—çš„ä¸ªæ•°ã€‚","tags":["é¢˜è§£"],"categories":["é¢˜è§£"]}]