<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Sanhai&#39;s Blogs</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2026-01-28T10:53:05.926Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>Sanhai</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hydro-ai</title>
    <link href="http://example.com/2026/01/28/Hydro-ai/"/>
    <id>http://example.com/2026/01/28/Hydro-ai/</id>
    <published>2026-01-28T10:51:54.000Z</published>
    <updated>2026-01-28T10:53:05.926Z</updated>
    
    <content type="html"><![CDATA[<p>当一道 timber 函数式编程思维题摆在你面前，读懂题面就花了 20 分钟，debug 时发现理解错了题意，这种痛苦相信每个 OIer 都懂。 HydroOJ 的题面往往承载着完整的背景故事，但对于初赛选手或是跨语言学习者来说，<strong>理解题意本身就是一道门槛</strong>。</p><p>今天开源的 <strong>hydrooj-plugin-ai-reader</strong>（AI 题面理解助手），不是来抢走你 AC 的成就感的，而是帮你<strong>用最短的时间抓住题目的命门</strong>。</p><h2 id="痛点：题面太长，抓不住重点"><a href="#痛点：题面太长，抓不住重点" class="headerlink" title="痛点：题面太长，抓不住重点"></a>痛点：题面太长，抓不住重点</h2><p>以一道典型的 OI 题为例：</p><blockquote><p><em>“Alice 和 Bob 在一张 n 个点 m 条边的无向图上玩游戏。每个点有一个权值……（500 字背景）……要求你输出一个最小的 k 使得对于所有满足……（数学定义）……的方案，都能……（条件判断）……”</em></p></blockquote><p>读完这段文字，你的大脑需要：</p><ol><li>过滤掉 Alice 和 Bob 的故事线</li><li>提取形式化定义：图、点权、阈值 k</li><li>识别约束条件：$n \le 10^5$ 意味着什么？</li></ol><p>这不仅耗时，还容易看错。特别是在多校训练中，时间宝贵，读懂题意就赢了一半。</p><h2 id="解决方案：AI-题面理解助手"><a href="#解决方案：AI-题面理解助手" class="headerlink" title="解决方案：AI 题面理解助手"></a>解决方案：AI 题面理解助手</h2><p>这个插件在 HydroOJ 的每道题目右侧新增一个”🤖 AI 题面理解”按钮。点击后，你会看到：</p><h3 id="1-极简题意概括"><a href="#1-极简题意概括" class="headerlink" title="1. 极简题意概括"></a>1. 极简题意概括</h3><p>用 1-2 句话说明”给定什么，求什么”，去掉所有背景故事。<br><em>示例：</em>给定无向图，点带点权，求满足连通块最大值限制的最小删边代价。</p><h3 id="2-关键信息提取"><a href="#2-关键信息提取" class="headerlink" title="2. 关键信息提取"></a>2. 关键信息提取</h3><ul><li><strong>数据范围速查</strong>：$n \le 10^5 \Rightarrow$ 需要线性或线性对数算法</li><li><strong>隐藏约束</strong>：无重边、权值非负、保证有解等容易忽视的前提</li><li><strong>边界情况</strong>：$n=1$、$m=0$、权值相等时的特殊处理</li></ul><h3 id="3-思考路径（苏格拉底式提问）"><a href="#3-思考路径（苏格拉底式提问）" class="headerlink" title="3. 思考路径（苏格拉底式提问）"></a>3. 思考路径（苏格拉底式提问）</h3><p>不会告诉你”用动态规划”或”建最短路”，而是问：</p><ul><li>“如果固定答案 k，能否快速检验可行性？”（暗示二分 or 贪心检验）</li><li>“观察数据范围，什么样的复杂度会 TLE？”（暗示算法复杂度选择）</li></ul><p>这是一种<strong>启发式学习</strong>，既保护了解题乐趣，又避免了在错误的方向上浪费时间。</p><h2 id="技术架构：与-HydroOJ-深度融合"><a href="#技术架构：与-HydroOJ-深度融合" class="headerlink" title="技术架构：与 HydroOJ 深度融合"></a>技术架构：与 HydroOJ 深度融合</h2><h3 id="域级开关控制（安全第一）"><a href="#域级开关控制（安全第一）" class="headerlink" title="域级开关控制（安全第一）"></a>域级开关控制（安全第一）</h3><p>与市面上其他插件不同，<strong>默认全站关闭</strong>，需在「控制面板-域设置」中手动开启。这保证了：</p><ul><li>正式比赛期间可完全禁用，维护公平性</li><li>不同训练域可灵活配置（入门域开启，高阶域关闭）</li><li>防止非目标用户误用（如将 OJ 用于就业笔试时）</li></ul><h3 id="智能缓存机制"><a href="#智能缓存机制" class="headerlink" title="智能缓存机制"></a>智能缓存机制</h3><p>同一道题的 AI 分析只需生成一次，存储于 MongoDB，后续所有用户共享。<strong>减少 API 调用成本</strong>的同时，也保证了同一道题提供的思考角度具有共识性。</p><h3 id="零侵入式集成"><a href="#零侵入式集成" class="headerlink" title="零侵入式集成"></a>零侵入式集成</h3><ul><li><strong>前端</strong>：通过 <code>NamedPage</code> 注入侧边栏，符合 Hydro 原生 UI 风格（使用 Hydro 的卡片、按钮、排版系统）</li><li><strong>后端</strong>：独立路由 <code>/p/:pid/ai</code>，权限继承 Hydro 的 <code>PRIV_USER_PROFILE</code></li><li><strong>风格统一</strong>：输出采用 Markdown + KaTeX，与题面渲染一致</li></ul><h3 id="提词工程（Prompt-Engineering）"><a href="#提词工程（Prompt-Engineering）" class="headerlink" title="提词工程（Prompt Engineering）"></a>提词工程（Prompt Engineering）</h3><p>核心提示词设计遵循**”教渔不授鱼”**原则：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">角色：资深 OI 教练</span><br><span class="line">禁止词：动态规划、最短路、线段树、ST 表...</span><br><span class="line">必做：将数学抽象描述为"是否具有某种性质"而非"使用某种数据结构"</span><br><span class="line">必做：每个思考点以疑问句结尾</span><br></pre></td></tr></tbody></table></figure><p>实际调用的 DeepSeek-V3 模型在此约束下，输出质量足以媲美教练手写 hint。</p><h2 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入服务器</span></span><br><span class="line"><span class="built_in">cd</span> /path/to/hydrooj/addons</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/your-repo/hydrooj-plugin-ai-reader.git</span><br><span class="line"><span class="built_in">cd</span> hydrooj-plugin-ai-reader</span><br><span class="line"></span><br><span class="line"><span class="comment"># HydroOJ 自动识别插件</span></span><br><span class="line">hydrooj addon add $(<span class="built_in">pwd</span>)</span><br><span class="line">pm2 reload hydrooj</span><br></pre></td></tr></tbody></table></figure><h3 id="配置（管理员）"><a href="#配置（管理员）" class="headerlink" title="配置（管理员）"></a>配置（管理员）</h3><p>进入「控制面板-系统设置」，添加 AI 配置（支持 GitCode/OpenRouter/DeepSeek 等）：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ai-summary:</span></span><br><span class="line">  <span class="attr">apiKey:</span> <span class="string">"sk-your-key"</span></span><br><span class="line">  <span class="attr">model:</span> <span class="string">"deepseek-ai/DeepSeek-V3.2-Exp"</span></span><br><span class="line">  <span class="attr">apiUrl:</span> <span class="string">"https://api-ai.gitcode.com/v1/chat/completions"</span></span><br></pre></td></tr></tbody></table></figure><h3 id="启用功能"><a href="#启用功能" class="headerlink" title="启用功能"></a>启用功能</h3><p>进入「域设置-🤖 AI 题面理解设置」，勾选<strong>启用</strong>。此时该域下的所有题目右侧都会出现 AI 按钮。</p><h2 id="实际效果对比"><a href="#实际效果对比" class="headerlink" title="实际效果对比"></a>实际效果对比</h2><p><strong>原题面片段（300 字）：</strong><br><em>小 K 是一位著名的嗜睡病患者，他每天都在与无垠的睡意作斗争。在这一天，他收到了 n 个任务，第 i 个任务有一个截止时间 d_i 和需要的时间 t_i……</em></p><p><strong>AI 简化后：</strong></p><blockquote><p><strong>题意</strong>：单资源调度问题，n 个任务有截止时间和耗时，求最大可完成的任务数。<br><strong>关键</strong>：$n \le 2×10^5$，$d_i,t_i \le 10^9$，暗示需 $O(n \log n)$ 或更优。<br><strong>思考</strong>：”如果有个任务耗时很长但截止时间很晚，它是否一定比耗时短且截止时间早的任务优先级低？”（暗示贪心按截止时间排序）</p></blockquote><p><strong>价值</strong>：20 秒抓住题目是”带截止时间的调度”，而非浪费 3 分钟去同情小 K 的嗜睡症。</p><h2 id="使用建议-边界"><a href="#使用建议-边界" class="headerlink" title="使用建议 &amp; 边界"></a>使用建议 &amp; 边界</h2><h3 id="适合开启的场景"><a href="#适合开启的场景" class="headerlink" title="适合开启的场景"></a>适合开启的场景</h3><ul><li><strong>新手入门域</strong>：帮助初学者学习如何读题、提取形式化模型</li><li><strong>英文题面训练</strong>：快速获取中文题意概括，降低语言门槛</li><li><strong>题单复习</strong>：快速回顾题目核心，验证自己对题意的记忆是否准确</li></ul><h3 id="建议关闭的场景"><a href="#建议关闭的场景" class="headerlink" title="建议关闭的场景"></a>建议关闭的场景</h3><ul><li><strong>正式比赛期间</strong>：维护公平性（可在比赛配置中单独关闭）</li><li><strong>原创题校考</strong>：防止外校选手利用 AI 快速理解题意优势</li></ul><h3 id="局限性"><a href="#局限性" class="headerlink" title="局限性"></a>局限性</h3><ul><li><strong>无法替代独立思考</strong>：不提供算法代码，不提供具体转移方程</li><li><strong>可能有幻觉</strong>：AI 可能对复杂题意理解有偏差，最终以原题面为准</li><li><strong>API 成本</strong>：生成一次约消耗 1-2k tokens，请自行评估成本</li></ul><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>hydrooj-plugin-ai-reader 不是来帮你 AC 的，而是帮你<strong>更快地进入状态</strong>。</p><p>OI 训练的本质是思维训练，而不是阅读理解题。当你能在 30 秒内通过 AI 摘要确认”这题是线段树维护区间众数”，然后立即开始思考具体怎么维护，你的训练效率就已经超过了还在读背景故事的同学。</p><p><strong>GitHub 地址</strong>：<a href="https://github.com/">github.com/your-repo/hydrooj-plugin-ai-reader</a><br><strong>讨论/反馈</strong>：欢迎提 Issue 或加 HydroOJ 用户群交流</p><p><em>祝你在 AI 的辅助下，把更多时间花在真正的算法思考上。</em></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;当一道 timber 函数式编程思维题摆在你面前，读懂题面就花了 20 分钟，debug 时发现理解错了题意，这种痛苦相信每个 OIer 都懂。 HydroOJ 的题面往往承载着完整的背景故事，但对于初赛选手或是跨语言学习者来说，&lt;strong&gt;理解题意本身就是一道门槛&lt;/</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>糖果公园 - 题解</title>
    <link href="http://example.com/2025/12/27/P4070%E7%B3%96%E6%9E%9C%E5%85%AC%E5%9B%AD%E9%A2%98%E8%A7%A3/"/>
    <id>http://example.com/2025/12/27/P4070%E7%B3%96%E6%9E%9C%E5%85%AC%E5%9B%AD%E9%A2%98%E8%A7%A3/</id>
    <published>2025-12-27T13:47:20.000Z</published>
    <updated>2025-12-31T03:46:38.866Z</updated>
    
    <content type="html"><![CDATA[<h1 id="糖果公园-题解"><a href="#糖果公园-题解" class="headerlink" title="糖果公园 题解"></a>糖果公园 题解</h1><h2 id="题目大意"><a href="#题目大意" class="headerlink" title="题目大意"></a>题目大意</h2><p>给定一棵 $n$ 个节点的树，每个节点有一种糖果 $C_i$ (共 m 种)。每种糖果有美味值 $V_i$，品尝第 $k$ 次同种糖果的新奇感为 $W_k$。游客从 $u$ 走到 $v$ 的愉悦度为路径上所有节点 $i$ 的 $V_{C_i}$ × $W_{count(C_i)}$ ​之和，其中<br>$count(C_i)$ 是此种糖果在当前路径上出现的次数。<br>需要支持两种操作：</p><p>修改某个节点的糖果种类。<br>查询某条路径的愉悦度。</p><h2 id="算法分析"><a href="#算法分析" class="headerlink" title="算法分析"></a>算法分析</h2><p>一看就指了解这题是 <strong>树上带修改莫队</strong> 问题。与序列莫队不同，本解法采用 DFN序结合路径移动 的方式，直接处理树上路径。<br>核心思路：DFN序结合带修莫队<br>DFN序预处理：通过DFS得到每个节点的DFN序（深度优先搜索序），用于莫队的块划分。<br>路径移动：使用 work 函数通过不断移动到父节点来改变当前路径。对于路径 $(u, v)$，通过移动端点到LCA来添加或移除节点。<br>处理修改：增加时间维度 $t$，记录修改操作。在莫队移动左右指针时，同时移动时间指针来处理修改。<br>LCA处理：关键点在于，路径移动后，LCA节点可能未被包含，因此需要在计算答案前临时添加LCA点，计算后移除。<br>块大小设置：通常取 $B = n^{2/3}$，总时间复杂度为 $O(n^{5/3})$。</p><h2 id="CODE"><a href="#CODE" class="headerlink" title="CODE"></a>CODE</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">200005</span>;</span><br><span class="line"><span class="type">int</span> n, M, m, dfn[N], idx, vv[N], ww[N], b[N], a[N], lg[N], f[N][<span class="number">20</span>], d[N], res, ans[N];</span><br><span class="line"><span class="type">int</span> B = <span class="number">200</span>;</span><br><span class="line">bitset&lt;N&gt;ex;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>{</span><br><span class="line">    <span class="type">int</span> l, r, id, t;</span><br><span class="line">}q[N], qr[N];</span><br><span class="line">vector&lt;<span class="type">int</span>&gt;v[N];</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt; (node x, node y) {</span><br><span class="line">    <span class="type">int</span> bx = dfn[x.l] / B, by = dfn[y.l] / B;</span><br><span class="line">    <span class="keyword">if</span> (bx != by) <span class="keyword">return</span> bx &lt; by;</span><br><span class="line">    <span class="type">int</span> cx = dfn[x.r] / B, cy = dfn[y.r] / B;</span><br><span class="line">    <span class="keyword">if</span> (cx != cy) <span class="keyword">return</span> cx &lt; cy;</span><br><span class="line">    <span class="keyword">return</span> x.t &lt; y.t;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> fa)</span> </span>{</span><br><span class="line">    dfn[x] = ++idx;</span><br><span class="line">    d[x] = d[fa] + <span class="number">1</span>;</span><br><span class="line">    f[x][<span class="number">0</span>] = fa;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> to : v[x]) {</span><br><span class="line">        <span class="keyword">if</span> (to != fa) {</span><br><span class="line">            <span class="built_in">dfs</span>(to, x);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">lca</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (d[x] &lt; d[y]) <span class="built_in">swap</span>(x, y);</span><br><span class="line">    <span class="type">int</span> diff = d[x] - d[y];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; diff; ++i) {</span><br><span class="line">        <span class="keyword">if</span> (diff &amp; <span class="number">1</span>) x = f[x][i];</span><br><span class="line">        diff &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (x == y) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = lg[n]; i &gt;= <span class="number">0</span>; i--) {</span><br><span class="line">        <span class="keyword">if</span> (f[x][i] != f[y][i]) {</span><br><span class="line">            x = f[x][i];</span><br><span class="line">            y = f[y][i];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> f[x][<span class="number">0</span>];</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> x)</span> </span>{</span><br><span class="line">    b[a[x]]++;</span><br><span class="line">    res += vv[a[x]] * ww[b[a[x]]];</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">del</span><span class="params">(<span class="type">int</span> x)</span> </span>{</span><br><span class="line">    res -= vv[a[x]] * ww[b[a[x]]];</span><br><span class="line">    b[a[x]]--;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">work</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> t)</span> </span>{</span><br><span class="line">    <span class="type">int</span> l = <span class="built_in">lca</span>(x, t);</span><br><span class="line">    <span class="keyword">while</span> (x != l) {</span><br><span class="line">        <span class="keyword">if</span> (ex[x]) {</span><br><span class="line">            ex[x] = <span class="number">0</span>;</span><br><span class="line">            <span class="built_in">del</span>(x);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            ex[x] = <span class="number">1</span>;</span><br><span class="line">            <span class="built_in">add</span>(x);</span><br><span class="line">        }</span><br><span class="line">        x = f[x][<span class="number">0</span>];</span><br><span class="line">    }</span><br><span class="line">    x = t;</span><br><span class="line">    <span class="keyword">while</span> (x != l) {</span><br><span class="line">        <span class="keyword">if</span> (ex[x]) {</span><br><span class="line">            ex[x] = <span class="number">0</span>;</span><br><span class="line">            <span class="built_in">del</span>(x);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            ex[x] = <span class="number">1</span>;</span><br><span class="line">            <span class="built_in">add</span>(x);</span><br><span class="line">        }</span><br><span class="line">        x = f[x][<span class="number">0</span>];</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">change</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span> (ex[x]) {</span><br><span class="line">        <span class="built_in">del</span>(x);</span><br><span class="line">        a[x] = y;</span><br><span class="line">        <span class="built_in">add</span>(x);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        a[x] = y;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; M &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; i++) {</span><br><span class="line">        lg[i] = lg[i &gt;&gt; <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= M; i++) cin &gt;&gt; vv[i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) cin &gt;&gt; ww[i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++) {</span><br><span class="line">        <span class="type">int</span> x, y;</span><br><span class="line">        cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">        v[x].<span class="built_in">push_back</span>(y);</span><br><span class="line">        v[y].<span class="built_in">push_back</span>(x);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) cin &gt;&gt; a[i];</span><br><span class="line"></span><br><span class="line">    idx = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= lg[n]; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) {</span><br><span class="line">            f[j][i] = f[f[j][i - <span class="number">1</span>]][i - <span class="number">1</span>];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> qcnt = <span class="number">0</span>, tcnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">pow</span>((<span class="type">double</span>)n, <span class="number">2.0</span>/<span class="number">3.0</span>) &gt; <span class="number">1</span>){</span><br><span class="line">        B = <span class="built_in">pow</span>((<span class="type">double</span>)n, <span class="number">2.0</span>/<span class="number">3.0</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span>{</span><br><span class="line">        B = <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++) {</span><br><span class="line">        <span class="type">int</span> type, x, y;</span><br><span class="line">        cin &gt;&gt; type &gt;&gt; x &gt;&gt; y;</span><br><span class="line">        <span class="keyword">if</span> (type == <span class="number">0</span>) {</span><br><span class="line">            tcnt++;</span><br><span class="line">            qr[tcnt].l = x;</span><br><span class="line">            qr[tcnt].r = a[x];</span><br><span class="line">            qr[tcnt].id = y;</span><br><span class="line">            qr[tcnt].t = tcnt;</span><br><span class="line">            a[x] = y;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            qcnt++;</span><br><span class="line">            q[qcnt].l = x;</span><br><span class="line">            q[qcnt].r = y;</span><br><span class="line">            q[qcnt].id = qcnt;</span><br><span class="line">            q[qcnt].t = tcnt;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = tcnt; i &gt;= <span class="number">1</span>; --i) {</span><br><span class="line">        a[ qr[i].l ] = qr[i].r;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="built_in">sort</span>(q + <span class="number">1</span>, q + qcnt + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> l = <span class="number">1</span>, r = <span class="number">1</span>, t = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) ex[i] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= M; i++) b[i] = <span class="number">0</span>;</span><br><span class="line">    res = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= qcnt; i++) {</span><br><span class="line">        <span class="built_in">work</span>(l, q[i].l);</span><br><span class="line">        l = q[i].l;</span><br><span class="line">        <span class="built_in">work</span>(r, q[i].r);</span><br><span class="line">        r = q[i].r;</span><br><span class="line">        <span class="keyword">while</span> (t &lt; q[i].t) {</span><br><span class="line">            t++;</span><br><span class="line">            <span class="built_in">change</span>(qr[t].l, qr[t].id);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">while</span> (t &gt; q[i].t) {</span><br><span class="line">            <span class="built_in">change</span>(qr[t].l, qr[t].r);</span><br><span class="line">            t--;</span><br><span class="line">        }</span><br><span class="line">        <span class="type">int</span> lc = <span class="built_in">lca</span>(l, r);</span><br><span class="line">        <span class="built_in">add</span>(lc); <span class="comment">// 临时添加LCA点</span></span><br><span class="line">        ans[q[i].id] = res;</span><br><span class="line">        <span class="built_in">del</span>(lc); <span class="comment">// 移除LCA点以恢复状态</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= qcnt; i++) {</span><br><span class="line">        cout &lt;&lt; ans[i] &lt;&lt; endl;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;糖果公园-题解&quot;&gt;&lt;a href=&quot;#糖果公园-题解&quot; class=&quot;headerlink&quot; title=&quot;糖果公园 题解&quot;&gt;&lt;/a&gt;糖果公园 题解&lt;/h1&gt;&lt;h2 id=&quot;题目大意&quot;&gt;&lt;a href=&quot;#题目大意&quot; class=&quot;headerlink&quot; titl</summary>
      
    
    
    
    <category term="题解" scheme="http://example.com/categories/%E9%A2%98%E8%A7%A3/"/>
    
    
    <category term="题解" scheme="http://example.com/tags/%E9%A2%98%E8%A7%A3/"/>
    
  </entry>
  
  <entry>
    <title>方格染色 - 题解</title>
    <link href="http://example.com/2025/12/25/P9478-NOI2023-%E6%96%B9%E6%A0%BC%E6%9F%93%E8%89%B2A%E9%A2%98%E8%A7%A3/"/>
    <id>http://example.com/2025/12/25/P9478-NOI2023-%E6%96%B9%E6%A0%BC%E6%9F%93%E8%89%B2A%E9%A2%98%E8%A7%A3/</id>
    <published>2025-12-25T15:07:36.000Z</published>
    <updated>2025-12-31T03:49:20.399Z</updated>
    
    <content type="html"><![CDATA[<h1 id="子任务-A-题解（纯水平染色）"><a href="#子任务-A-题解（纯水平染色）" class="headerlink" title="子任务 A 题解（纯水平染色）"></a>子任务 A 题解（纯水平染色）</h1><blockquote><p>说句实话，我写的题解真的是不如AI。那么作为一个<del>OI选手</del>人类，我们能做的是什么呢？只有如何想出来的思路罢了。所以本篇题解主要注意的是思想过程，以及遇到一道题目时我的反应。</p></blockquote><h2 id="一、首先"><a href="#一、首先" class="headerlink" title="一、首先"></a>一、首先</h2><h3 id="1-1-从长题面中提取"><a href="#1-1-从长题面中提取" class="headerlink" title="1.1 从长题面中提取"></a>1.1 从长题面中提取</h3><p>看着很长，最关键的是什么呢？那肯定是提炼（说了句废话）。</p><p>通过看题，我们可以找到以下关键点：</p><blockquote><p><strong>注意</strong>：因为我们只做A，所以我们只需要考虑横的情况</p></blockquote><p>所以最后就变成了：一开始全白，给操作，每次把一行中的 $[x_1, x_2]$ 这个范围变黑。</p><p>好的那我们就成功的完成了缩小（是不是很简单）</p><h3 id="1-2-看到问题首先想到什么"><a href="#1-2-看到问题首先想到什么" class="headerlink" title="1.2 看到问题首先想到什么"></a>1.2 看到问题首先想到什么</h3><p><strong>第一反应</strong>：这是一个二维平面染色问题。但操作仅限于水平方向，显然不同行之间没有关系。</p><p>可是SAM说禁用显然，这可怎么办，那只能证明了v-v</p><ul><li>操作1：染黑第3行的[1,5]</li><li>操作2：染黑第5行的[2,4]</li><li>第3行的操作会影响第5行吗？<strong>显然不会</strong></li></ul><blockquote><p><strong>核心观察</strong>：不同行的操作完全独立！每行的染色结果只取决于该行的操作集合。</p></blockquote><p>于是问题转化为： <strong>对每一行，已知若干区间 $[x_1, x_2]$，求被覆盖的格子总数</strong>。</p><h2 id="二、那么我们可以想到什么方法呢"><a href="#二、那么我们可以想到什么方法呢" class="headerlink" title="二、那么我们可以想到什么方法呢"></a>二、那么我们可以想到什么方法呢</h2><blockquote><p><strong>提示</strong>：首先我们要考虑的是：因为可能出现相同的地方重复染色，所以自然，我们可以想到以下算法</p></blockquote><h3 id="2-1-方法一：暴力法"><a href="#2-1-方法一：暴力法" class="headerlink" title="2.1 方法一：暴力法"></a>2.1 方法一：暴力法</h3><p><strong>思路</strong>：对每行，创建一个大小为 $m$ 的布尔数组，遍历每个操作，将对应位置标记为 <code>true</code>，最后统计 <code>true</code> 的数量。</p><p><strong>缺点</strong>：$m \le 10^9$，数组太大，空间爆炸。</p><p><strong>暴力</strong></p><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 此方法仅用于理解问题</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="type">int</span> c; <span class="type">long</span> <span class="type">long</span> n, m; <span class="type">int</span> q;</span><br><span class="line">    cin &gt;&gt; c &gt;&gt; n &gt;&gt; m &gt;&gt; q;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//空间占用超标</span></span><br><span class="line">    vector&lt;vector&lt;<span class="type">bool</span>&gt;&gt; <span class="built_in">board</span>(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="type">bool</span>&gt;(m + <span class="number">1</span>, <span class="literal">false</span>));</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; q; i++) {</span><br><span class="line">        <span class="type">int</span> t; <span class="type">long</span> <span class="type">long</span> x1, y1, x2, y2;</span><br><span class="line">        cin &gt;&gt; t &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2;</span><br><span class="line">        <span class="keyword">if</span> (t == <span class="number">1</span>) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">long</span> <span class="type">long</span> x = x1; x &lt;= x2; x++) {</span><br><span class="line">                board[y1][x] = <span class="literal">true</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> y = <span class="number">1</span>; y &lt;= n; y++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">long</span> <span class="type">long</span> x = <span class="number">1</span>; x &lt;= m; x++) {</span><br><span class="line">            <span class="keyword">if</span> (board[y][x]) ans++;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="2-2-方法二：线段树-树状数组"><a href="#2-2-方法二：线段树-树状数组" class="headerlink" title="2.2 方法二：线段树/树状数组"></a>2.2 方法二：线段树/树状数组</h3><p><strong>思路</strong>：对每行建立线段树或树状数组，支持区间染色和查询。每次操作调用区间更新，最后查询整行的覆盖长度。</p><p><strong>缺点</strong>：需要为每行维护一棵线段树，空间复杂度 $O(n \cdot \log m)$ 或需要动态开点，实现复杂且效率低下。</p><p><strong>线段</strong></p><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">SegTree</span> {</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; tree, lazy;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">SegTree</span>(<span class="type">int</span> _n) {</span><br><span class="line">        n = _n;</span><br><span class="line">        tree.<span class="built_in">assign</span>(<span class="number">4</span> * n + <span class="number">5</span>, <span class="number">0</span>);</span><br><span class="line">        lazy.<span class="built_in">assign</span>(<span class="number">4</span> * n + <span class="number">5</span>, <span class="number">0</span>);</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">push</span><span class="params">(<span class="type">int</span> node, <span class="type">int</span> l, <span class="type">int</span> r)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (lazy[node]) {</span><br><span class="line">            tree[node] = (r - l + <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span> (l != r) {</span><br><span class="line">                lazy[node * <span class="number">2</span>] = lazy[node * <span class="number">2</span> + <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">            }</span><br><span class="line">            lazy[node] = <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> node, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> ul, <span class="type">int</span> ur)</span> </span>{</span><br><span class="line">        <span class="built_in">push</span>(node, l, r);</span><br><span class="line">        <span class="keyword">if</span> (ul &gt; r || ur &lt; l) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span> (ul &lt;= l &amp;&amp; r &lt;= ur) {</span><br><span class="line">            lazy[node] = <span class="number">1</span>;</span><br><span class="line">            <span class="built_in">push</span>(node, l, r);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">update</span>(node * <span class="number">2</span>, l, mid, ul, ur);</span><br><span class="line">        <span class="built_in">update</span>(node * <span class="number">2</span> + <span class="number">1</span>, mid + <span class="number">1</span>, r, ul, ur);</span><br><span class="line">        tree[node] = tree[node * <span class="number">2</span>] + tree[node * <span class="number">2</span> + <span class="number">1</span>];</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> tree[<span class="number">1</span>];</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="type">int</span> c; <span class="type">long</span> <span class="type">long</span> n, m; <span class="type">int</span> q;</span><br><span class="line">    cin &gt;&gt; c &gt;&gt; n &gt;&gt; m &gt;&gt; q;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 需要为每行建线段树，空间太大</span></span><br><span class="line">    unordered_map&lt;<span class="type">long</span> <span class="type">long</span>, SegTree*&gt; rowTrees;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; q; i++) {</span><br><span class="line">        <span class="type">int</span> t; <span class="type">long</span> <span class="type">long</span> x1, y1, x2, y2;</span><br><span class="line">        cin &gt;&gt; t &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2;</span><br><span class="line">        <span class="keyword">if</span> (t == <span class="number">1</span>) {</span><br><span class="line">            <span class="keyword">if</span> (rowTrees.<span class="built_in">find</span>(y1) == rowTrees.<span class="built_in">end</span>()) {</span><br><span class="line">                rowTrees[y1] = <span class="keyword">new</span> <span class="built_in">SegTree</span>(m);</span><br><span class="line">            }</span><br><span class="line">            rowTrees[y1]-&gt;<span class="built_in">update</span>(<span class="number">1</span>, <span class="number">1</span>, m, x1, x2);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; p : rowTrees) {</span><br><span class="line">        ans += p.second-&gt;<span class="built_in">query</span>();</span><br><span class="line">    }</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>&lt;-本代码由AI辅助生成-&gt;</p><h3 id="2-3-方法三：区间合并法"><a href="#2-3-方法三：区间合并法" class="headerlink" title="2.3 方法三：区间合并法"></a>2.3 方法三：区间合并法</h3><p><strong>思路</strong>：将每行的所有区间收集起来，排序后合并重叠或相邻的区间，直接计算并集长度。<br>那这个就是最后的代码了，直接看下面把</p><h2 id="三、区间合并法"><a href="#三、区间合并法" class="headerlink" title="三、区间合并法"></a>三、区间合并法</h2><h3 id="3-1-整体流程"><a href="#3-1-整体流程" class="headerlink" title="3.1 整体流程"></a>3.1 整体流程</h3><p><strong>1.读入</strong><br>将水平操作（$t=1$），存入数组 <code>seg[]</code>。</p><p><strong>2.排序</strong><br>按行号<code>h</code>对 <code>seg[]</code> 排序，使同一行的区间连续。</p><p><strong>3.逐行处理</strong><br>对每一行执行：</p><ol><li>将该行所有区间复制到临时数组 <code>tmp[]</code></li><li>按左端点<code>l</code>对 <code>tmp[]</code> 排序</li><li><strong>合并扫描</strong>：<ul><li>维护当前区间 <code>[curL, curR]</code></li><li>遍历排序后的区间 <code>[L, R]</code>：<ul><li>如果 <code>L &lt;= curR + 1</code>：可合并，<code>curR = max(curR, R)</code></li><li>否则：结算当前区间，<code>ans += curR - curL + 1</code>，重置 <code>[curL, curR] = [L, R]</code></li></ul></li><li>遍历结束后再结算最后一个区间</li></ul></li></ol><p>是不是简单高效的方法呢～</p><h2 id="复杂度分析"><a href="#复杂度分析" class="headerlink" title="复杂度分析"></a>复杂度分析</h2><ul><li><strong>时间</strong>：主要开销是排序。按行号排序 $O(cnt \log cnt)$，每行内部排序的总长度不超过 $cnt$，故整体 $O(q \log q)$。</li><li><strong>空间</strong>：两个大小为 $q$ 的静态数组 <code>seg[]</code> 和 <code>tmp[]</code>，空间 $O(q)$。</li></ul><h2 id="CODE"><a href="#CODE" class="headerlink" title="CODE"></a>CODE</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">QD</span> {</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> h;<span class="comment">//行号</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> l;<span class="comment">//左端点</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> r;<span class="comment">//右端点</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">QD seg[<span class="number">100005</span>];</span><br><span class="line">QD tmp[<span class="number">100005</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按行号排序</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp1</span><span class="params">(<span class="type">const</span> QD&amp; x, <span class="type">const</span> QD&amp; y)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> x.h &lt; y.h;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 按左端点排序</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp2</span><span class="params">(<span class="type">const</span> QD&amp; x, <span class="type">const</span> QD&amp; y)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> x.l &lt; y.l;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="type">int</span> c; </span><br><span class="line">    cin &gt;&gt; c;</span><br><span class="line">    </span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> n, m;</span><br><span class="line">    <span class="type">int</span> q;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; q;</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; q; i++) {</span><br><span class="line">        <span class="type">int</span> t; <span class="type">long</span> <span class="type">long</span> x1, y1, x2, y2;</span><br><span class="line">        cin &gt;&gt; t &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2;</span><br><span class="line">        <span class="keyword">if</span> (t == <span class="number">1</span>) {</span><br><span class="line">            seg[cnt++] = {y1, x1, x2};</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//按行号排序，让同一行的区间连续</span></span><br><span class="line">    <span class="built_in">sort</span>(seg, seg + cnt, cmp1);</span><br><span class="line">    </span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> ans = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//遍历每一行</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; cnt; ) {</span><br><span class="line">        <span class="type">int</span> j = i;</span><br><span class="line">        <span class="comment">// 找到同一行的区间，j指向下一行的开头</span></span><br><span class="line">        <span class="keyword">while</span> (j &lt; cnt &amp;&amp; seg[j].h == seg[i].h) {</span><br><span class="line">            j++;</span><br><span class="line">        }</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//按左端点排序</span></span><br><span class="line">        <span class="type">int</span> len = j - i;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; len; k++) {</span><br><span class="line">            tmp[k] = seg[i + k];</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">sort</span>(tmp, tmp + len, cmp2);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//合并区间并累加长度</span></span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> curL = tmp[<span class="number">0</span>].l;</span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> curR = tmp[<span class="number">0</span>].r;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">1</span>; k &lt; len; k++) {</span><br><span class="line">            <span class="type">long</span> <span class="type">long</span> L = tmp[k].l;</span><br><span class="line">            <span class="type">long</span> <span class="type">long</span> R = tmp[k].r;</span><br><span class="line">            <span class="keyword">if</span> (L &lt;= curR + <span class="number">1</span>) {<span class="comment">//可合并</span></span><br><span class="line">                <span class="keyword">if</span> (R &gt; curR) curR = R;</span><br><span class="line">            } <span class="keyword">else</span> {<span class="comment">//不能合并，结算</span></span><br><span class="line">                ans += curR - curL + <span class="number">1</span>;</span><br><span class="line">                curL = L;</span><br><span class="line">                curR = R;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        ans += curR - curL + <span class="number">1</span>;<span class="comment">//别忘了最后一个区间</span></span><br><span class="line">        </span><br><span class="line">        i = j;<span class="comment">// 跳到下一行</span></span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><hr><p><strong>🎌 结语</strong></p><p>OK啊，分拿到了。本题解结束</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;子任务-A-题解（纯水平染色）&quot;&gt;&lt;a href=&quot;#子任务-A-题解（纯水平染色）&quot; class=&quot;headerlink&quot; title=&quot;子任务 A 题解（纯水平染色）&quot;&gt;&lt;/a&gt;子任务 A 题解（纯水平染色）&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;说句实话，</summary>
      
    
    
    
    <category term="题解" scheme="http://example.com/categories/%E9%A2%98%E8%A7%A3/"/>
    
    
    <category term="题解" scheme="http://example.com/tags/%E9%A2%98%E8%A7%A3/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://example.com/2025/12/25/hello-world/"/>
    <id>http://example.com/2025/12/25/hello-world/</id>
    <published>2025-12-25T12:57:17.626Z</published>
    <updated>2025-11-25T09:22:14.953Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://app-36819-sanhai.cn24.ugdocker.link/">Sanhai’s Blogs</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h2><h3 id="新建一篇文章"><a href="#新建一篇文章" class="headerlink" title="新建一篇文章"></a>新建一篇文章</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="开始服务"><a href="#开始服务" class="headerlink" title="开始服务"></a>开始服务</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://app-36819-sanhai.cn24.ugdocker.link/&quot;&gt;Sanhai’s Blogs&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https:</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>学习小组 - 题解</title>
    <link href="http://example.com/2025/12/11/T706110%E5%AD%A6%E4%B9%A0%E5%B0%8F%E7%BB%84%E9%A2%98%E8%A7%A3/"/>
    <id>http://example.com/2025/12/11/T706110%E5%AD%A6%E4%B9%A0%E5%B0%8F%E7%BB%84%E9%A2%98%E8%A7%A3/</id>
    <published>2025-12-11T15:07:36.000Z</published>
    <updated>2025-12-11T07:17:30.202Z</updated>
    
    <content type="html"><![CDATA[<h1 id="T706110-学习小组"><a href="#T706110-学习小组" class="headerlink" title="T706110 学习小组"></a>T706110 学习小组</h1><h2 id="题意简述"><a href="#题意简述" class="headerlink" title="题意简述"></a>题意简述</h2><p>给定长度为 $ n $（$ n \leq 2 \times 10^5 $）的序列 $ s $，统计满足下标严格递增且</p><p>$$<br>s_i &lt; s_j &lt; s_k \quad \text{或} \quad s_i &gt; s_j &gt; s_k<br>$$</p><p>的三元组 $ (i, j, k) $ 的数量。</p><h2 id="算法思路"><a href="#算法思路" class="headerlink" title="算法思路"></a>算法思路</h2><p>将三元组问题转化为“中间人”问题：</p><p>对于每个位置 $ j $，统计：</p><ul><li>前面比 $ s_j $ 小的数量：$ \mathrm{preLess}[j] $</li><li>前面比 $ s_j $ 大的数量：$ \mathrm{preGreater}[j] $</li><li>后面比 $ s_j $ 小的数量：$ \mathrm{postLess}[j] $</li><li>后面比 $ s_j $ 大的数量：$ \mathrm{postGreater}[j] $</li></ul><p>则每个位置 $ j $ 的贡献为：</p><p>$$<br>\mathrm{preLess}[j] \times \mathrm{postGreater}[j] + \mathrm{preGreater}[j] \times \mathrm{postLess}[j]<br>$$</p><p>总答案为所有位置贡献之和。</p><h2 id="实现方法"><a href="#实现方法" class="headerlink" title="实现方法"></a>实现方法</h2><ol><li><strong>离散化</strong>：将值域映射到连续区间，方便树状数组处理。</li><li><strong>树状数组</strong>：两次扫描（正序 + 倒序）统计前后关系。</li><li><strong>累加贡献</strong>：线性统计每个位置的贡献。</li></ol><h2 id="复杂度分析"><a href="#复杂度分析" class="headerlink" title="复杂度分析"></a>复杂度分析</h2><ul><li><strong>时间复杂度</strong>：$ O(n \log n) $</li><li><strong>空间复杂度</strong>：$ O(n) $</li></ul><h2 id="参考代码"><a href="#参考代码" class="headerlink" title="参考代码"></a>参考代码</h2><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> ll = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">2e5</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, s[N], tmp[N], m;</span><br><span class="line">ll preL[N], preG[N], postL[N], postG[N], ans;</span><br><span class="line"><span class="type">int</span> c[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> v = <span class="number">1</span>)</span> </span>{</span><br><span class="line">    <span class="keyword">for</span> (; x &lt;= m; x += x &amp; -x) c[x] += v;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">ask</span><span class="params">(<span class="type">int</span> x)</span> </span>{</span><br><span class="line">    <span class="type">int</span> s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (; x; x -= x &amp; -x) s += c[x];</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) {</span><br><span class="line">        cin &gt;&gt; s[i];</span><br><span class="line">        tmp[i] = s[i];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 离散化</span></span><br><span class="line">    <span class="built_in">sort</span>(tmp + <span class="number">1</span>, tmp + n + <span class="number">1</span>);</span><br><span class="line">    m = <span class="built_in">unique</span>(tmp + <span class="number">1</span>, tmp + n + <span class="number">1</span>) - tmp - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 正序</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) {</span><br><span class="line">        <span class="type">int</span> r = <span class="built_in">lower_bound</span>(tmp + <span class="number">1</span>, tmp + m + <span class="number">1</span>, s[i]) - tmp;</span><br><span class="line">        preL[i] = <span class="built_in">ask</span>(r - <span class="number">1</span>);</span><br><span class="line">        preG[i] = <span class="built_in">ask</span>(m) - <span class="built_in">ask</span>(r);</span><br><span class="line">        <span class="built_in">add</span>(r);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 倒序</span></span><br><span class="line">    <span class="built_in">memset</span>(c, <span class="number">0</span>, <span class="built_in">sizeof</span>(c));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = n; i &gt;= <span class="number">1</span>; --i) {</span><br><span class="line">        <span class="type">int</span> r = <span class="built_in">lower_bound</span>(tmp + <span class="number">1</span>, tmp + m + <span class="number">1</span>, s[i]) - tmp;</span><br><span class="line">        postL[i] = <span class="built_in">ask</span>(r - <span class="number">1</span>);</span><br><span class="line">        postG[i] = <span class="built_in">ask</span>(m) - <span class="built_in">ask</span>(r);</span><br><span class="line">        <span class="built_in">add</span>(r);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 累加答案</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        ans += preL[i] * postG[i] + preG[i] * postL[i];</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="提示"><a href="#提示" class="headerlink" title="提示"></a>提示</h2><ul><li>树状数组常数较小，可直接通过。</li><li>注意离散化时处理重复值。</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;T706110-学习小组&quot;&gt;&lt;a href=&quot;#T706110-学习小组&quot; class=&quot;headerlink&quot; title=&quot;T706110 学习小组&quot;&gt;&lt;/a&gt;T706110 学习小组&lt;/h1&gt;&lt;h2 id=&quot;题意简述&quot;&gt;&lt;a href=&quot;#题意简述&quot; cla</summary>
      
    
    
    
    <category term="题解" scheme="http://example.com/categories/%E9%A2%98%E8%A7%A3/"/>
    
    
    <category term="题解" scheme="http://example.com/tags/%E9%A2%98%E8%A7%A3/"/>
    
  </entry>
  
  <entry>
    <title>降水 - 题解</title>
    <link href="http://example.com/2025/12/04/T706068%E9%99%8D%E6%B0%B4%E9%A2%98%E8%A7%A3/"/>
    <id>http://example.com/2025/12/04/T706068%E9%99%8D%E6%B0%B4%E9%A2%98%E8%A7%A3/</id>
    <published>2025-12-04T13:40:36.000Z</published>
    <updated>2025-12-10T00:50:56.730Z</updated>
    
    <content type="html"><![CDATA[<p><strong>题意理解</strong></p><p>有 N 座山围成一圈（N 是奇数），每座山 i 会下 $p_i$ 升雨。这些雨水会平均分给左右两个大坝：左边的大坝 i-1 和右边的大坝 i 各得到 $p_i/2$ 升。大坝 i 收集到的总水量就是 $a_i$。</p><p>所以 $a_i$ 和 $p_i$ 的关系就是：</p><p>$$<br>a_i = \frac{p_i + p_{i+1}}{2}<br>$$</p><p>两边乘 2：</p><p>$$<br>p_i + p_{i+1} = 2a_i \tag{1}<br>$$</p><p><strong>核心思路</strong></p><p>这个式子很关键！它告诉我们：只要知道 $p_i$，就能算出 $p_{i+1}$：</p><p>$$<br>p_{i+1} = 2a_i - p_i \tag{2}<br>$$</p><p>问题就变成了：怎么求出 $p_1$？</p><p>因为 N 是奇数，我们可以绕一圈用 $p_1$ 把自己表示出来。从 $p_1$ 开始，反复用公式 (2) 推下去：</p><p>$$<br>\begin{aligned}<br>p_2 &amp;= 2a_1 - p_1 \<br>p_3 &amp;= 2a_2 - p_2 = 2a_2 - (2a_1 - p_1) = -2a_1 + 2a_2 + p_1 \<br>p_4 &amp;= 2a_3 - p_3 = 2a_3 - (-2a_1 + 2a_2 + p_1) = 2a_1 - 2a_2 + 2a_3 - p_1<br>\end{aligned}<br>$$</p><p>我们注意到一个规律：奇数项是 $p_1$ 加上一堆 $\pm 2a_i$，偶数项是 $-p_1$ 加上一堆 $\pm 2a_i$。</p><p>因为 N 是奇数，所以 $p_N$ 也是奇数项，可以写成：</p><p>$$<br>p_N = p_1 + 2(a_1 - a_2 + a_3 - a_4 + \dots - a_{N-1})<br>$$</p><p>注意最后一个方程 (1) 当 $i=N$ 时是：</p><p>$$<br>p_N + p_1 = 2a_N<br>$$</p><p>把 $p_N$ 的表达式代入：</p><p>$$<br>(p_1 + 2(a_1 - a_2 + \dots - a_{N-1})) + p_1 = 2a_N<br>$$</p><p>两边除以 2，得到：</p><p>$$<br>p_1 = a_N - a_1 + a_2 - a_3 + \dots + a_{N-1}<br>$$</p><p>也就是：</p><p>$$<br>p_1 = a_N + \sum_{i=1}^{N-1} (-1)^{i+1} a_i<br>$$</p><p><strong>算法流程</strong></p><ol><li>用公式算出 $p_1$</li><li>从 $i=1$ 到 $N-1$，用递推式 $p_{i+1} = 2a_i - p_i$ 算出所有 $p_i$</li></ol><p>复杂度是 $O(N)$ 时间，$O(N)$ 空间（存 $a_i$ 和 $p_i$ 数组）。</p><p><strong>代码实现</strong></p><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">long</span> <span class="type">long</span> a[<span class="number">100005</span>];</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> p[<span class="number">100005</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> N;</span><br><span class="line">    cin &gt;&gt; N;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; ++i) cin &gt;&gt; a[i];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 计算 p1：交错和</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> p1 = a[N];  <span class="comment">// 先放 a_N</span></span><br><span class="line">    <span class="type">int</span> sign = <span class="number">+1</span>;            <span class="comment">// a_1 的系数是 +1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; N - <span class="number">1</span>; ++i) {</span><br><span class="line">        p1 += sign * a[i];</span><br><span class="line">        sign = -sign;         <span class="comment">// 正负交替</span></span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    p[<span class="number">0</span>] = p1;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; N; ++i) {</span><br><span class="line">        p[i] = <span class="number">2LL</span> * a[i - <span class="number">1</span>] - p[i - <span class="number">1</span>];</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; ++i) {</span><br><span class="line">        <span class="keyword">if</span> (i) cout &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">        cout &lt;&lt; p[i];</span><br><span class="line">    }</span><br><span class="line">    cout &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>一些小细节</strong></p><ul><li>数据范围最大到 $10^9$，N 最大到 $10^5-1$，所以 $p_i$ 可能很大，要用 long long</li><li>N 是奇数这个条件非常关键，如果 N 是偶数，方程组可能无解或有无穷多解</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;题意理解&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;有 N 座山围成一圈（N 是奇数），每座山 i 会下 $p_i$ 升雨。这些雨水会平均分给左右两个大坝：左边的大坝 i-1 和右边的大坝 i 各得到 $p_i/2$ 升。大坝 i 收集到的总水量就是 $a_i$。&lt;/</summary>
      
    
    
    
    <category term="题解" scheme="http://example.com/categories/%E9%A2%98%E8%A7%A3/"/>
    
    
    <category term="题解" scheme="http://example.com/tags/%E9%A2%98%E8%A7%A3/"/>
    
  </entry>
  
  <entry>
    <title>最小的x - 题解</title>
    <link href="http://example.com/2025/12/04/T706109%E6%9C%80%E5%B0%8F%E7%9A%84x%E9%A2%98%E8%A7%A3/"/>
    <id>http://example.com/2025/12/04/T706109%E6%9C%80%E5%B0%8F%E7%9A%84x%E9%A2%98%E8%A7%A3/</id>
    <published>2025-12-04T13:40:36.000Z</published>
    <updated>2025-12-10T00:50:26.962Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h2><p><strong>思路</strong></p><p>题目要求最小的正整数 $x$，使得 $n+x^2$ 是一个完全平方数。</p><p>设 $y^2=n+x^2$，移项后平方差公式直接带走：</p><p>$$<br>y^2-x^2=n \implies (y-x)(y+x)=n<br>$$</p><p>令 $a=y-x$, $b=y+x$，则 $a\cdot b=n$。显然 $a&lt;b$，而且因为 $x,b,y$ 都是整数，$a$ 和 $b$ 必须同奇偶（同为奇数或同为偶数）。</p><p>一旦找到满足条件的因子对 $(a,b)$，就有</p><p>$$<br>x=\frac{b-a}{2},\quad y=\frac{a+b}{2}<br>$$</p><p>为了让 $x$ 最小，需要 $b-a$ 最小。注意到 $b=n/a$，$a$ 越大，$b$ 越小，差就越小。所以我们从 $\lfloor\sqrt n\rfloor$ 开始<strong>倒序</strong>枚举 $a$，第一个合法的因子对一定对应最小的 $x$。</p><p><strong>无解</strong></p><p>两个同奇偶性的数相乘，结果要么是奇数，要么是 4 的倍数。所以如果 $n\equiv 2\pmod 4$，一定无解。</p><p>另外，$n=1$ 和 $n=4$ 时，唯一的因子对是 $(1,1)$ 或 $(2,2)$，算出来 $x=0$，不符合正整数要求。这两种情况直接输出 $-1$。</p><p>其余情况必然有解。</p><p><strong>代码</strong></p><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">long</span> <span class="type">long</span> n; cin&gt;&gt;n;</span><br><span class="line"><span class="keyword">if</span> (n%<span class="number">4</span>==<span class="number">2</span> || n==<span class="number">1</span> || n==<span class="number">4</span>) { cout&lt;&lt;<span class="number">-1</span>; <span class="keyword">return</span> <span class="number">0</span>; }</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> ans=<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">long</span> <span class="type">long</span> a=<span class="built_in">sqrt</span>(n); a&gt;=<span class="number">1</span>; --a) {</span><br><span class="line">    <span class="keyword">if</span> (n%a!=<span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> b=n/a;</span><br><span class="line">    <span class="keyword">if</span> ((a%<span class="number">2</span>)==(b%<span class="number">2</span>) &amp;&amp; a&lt;b) {</span><br><span class="line">        ans=(b-a)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">cout&lt;&lt;ans;</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;题解&quot;&gt;&lt;a href=&quot;#题解&quot; class=&quot;headerlink&quot; title=&quot;题解&quot;&gt;&lt;/a&gt;题解&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;思路&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;题目要求最小的正整数 $x$，使得 $n+x^2$ 是一个完全平方数。&lt;/p&gt;
&lt;p&gt;</summary>
      
    
    
    
    <category term="题解" scheme="http://example.com/categories/%E9%A2%98%E8%A7%A3/"/>
    
    
    <category term="题解" scheme="http://example.com/tags/%E9%A2%98%E8%A7%A3/"/>
    
  </entry>
  
  <entry>
    <title>Sanhai-loading</title>
    <link href="http://example.com/2025/11/29/Sanhai-loading/"/>
    <id>http://example.com/2025/11/29/Sanhai-loading/</id>
    <published>2025-11-29T13:40:50.000Z</published>
    <updated>2025-11-29T13:52:06.942Z</updated>
    
    <content type="html"><![CDATA[<h3 id="✅-一、插件目录（官方结构）"><a href="#✅-一、插件目录（官方结构）" class="headerlink" title="✅ 一、插件目录（官方结构）"></a>✅ 一、插件目录（官方结构）</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/root/addon/sanhai-loading/</span><br><span class="line">├── package.json</span><br><span class="line">├── template.yaml</span><br><span class="line">├── index.js</span><br><span class="line">├── templates/</span><br><span class="line">│   └── partials/</span><br><span class="line">│       └── loading.html</span><br><span class="line">└── static/</span><br><span class="line">    └── sanhai-loading.css</span><br></pre></td></tr></tbody></table></figure><h3 id="✅-二、核心文件"><a href="#✅-二、核心文件" class="headerlink" title="✅ 二、核心文件"></a>✅ 二、核心文件</h3><p><strong>package.json</strong></p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">  <span class="attr">"name"</span><span class="punctuation">:</span> <span class="string">"sanhai-loading"</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">"version"</span><span class="punctuation">:</span> <span class="string">"1.0.0"</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">"description"</span><span class="punctuation">:</span> <span class="string">"SanhaiOJ 7 款弹性加载动画 · 后台可切换"</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">"main"</span><span class="punctuation">:</span> <span class="string">"index.js"</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">"template"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">"style"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p><strong>template.yaml</strong></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">partials/loading.html:</span> <span class="string">./templates/partials/loading.html</span></span><br></pre></td></tr></tbody></table></figure><p><strong>index.js</strong></p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">ctx</span>) {</span><br><span class="line">  <span class="comment">// 后台配置项（动画类型 + 速度）</span></span><br><span class="line">  ctx.<span class="property">config</span>.<span class="title function_">set</span>(<span class="string">'sanhai_loading_type'</span>, <span class="string">'dots'</span>, <span class="literal">true</span>);</span><br><span class="line">  ctx.<span class="property">config</span>.<span class="title function_">set</span>(<span class="string">'sanhai_loading_speed'</span>, <span class="number">1</span>, <span class="literal">true</span>);</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure><h3 id="✅-三、模板文件（官方路径）"><a href="#✅-三、模板文件（官方路径）" class="headerlink" title="✅ 三、模板文件（官方路径）"></a>✅ 三、模板文件（官方路径）</h3><p><strong>templates/partials/loading.html</strong></p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- SanhaiOJ 弹性加载动画 · 7 选 1 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"sanhai-loading"</span> <span class="attr">class</span>=<span class="string">"sanhai-loader {{ config.get('sanhai_loading_type', 'dots') }}"</span> <span class="attr">style</span>=<span class="string">"--speed:{{ config.get('sanhai_loading_speed', 1) }}s"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"{{ url('static', 'sanhai-loading.css') }}"</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="✅-四、集中样式（7-款动画）"><a href="#✅-四、集中样式（7-款动画）" class="headerlink" title="✅ 四、集中样式（7 款动画）"></a>✅ 四、集中样式（7 款动画）</h3><p><strong>static/sanhai-loading.css</strong></p><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ---- 基础覆盖 ---- */</span></span><br><span class="line"><span class="selector-id">#sanhai-loading</span>{</span><br><span class="line">  <span class="attribute">position</span>:fixed;<span class="attribute">inset</span>:<span class="number">0</span>;<span class="attribute">z-index</span>:<span class="number">9999</span>;</span><br><span class="line">  <span class="attribute">display</span>:flex;<span class="attribute">align-items</span>:center;<span class="attribute">justify-content</span>:center;</span><br><span class="line">  <span class="attribute">background</span>:<span class="number">#fff</span>;     <span class="comment">/* 官方白底 */</span></span><br><span class="line">  <span class="attr">--speed</span>:<span class="number">1s</span>;          <span class="comment">/* 后台速度变量 */</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ---- 7 款动画 ---- */</span></span><br><span class="line"><span class="selector-class">.sanhai-loader</span><span class="selector-class">.dots</span>{</span><br><span class="line">  <span class="attribute">display</span>:flex;<span class="attribute">gap</span>:<span class="number">8px</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.sanhai-loader</span><span class="selector-class">.dots</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.sanhai-loader</span><span class="selector-class">.dots</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.sanhai-loader</span><span class="selector-class">.dots</span>{</span><br><span class="line">  <span class="attribute">content</span>:<span class="string">''</span>;<span class="attribute">width</span>:<span class="number">10px</span>;<span class="attribute">height</span>:<span class="number">10px</span>;<span class="attribute">background</span>:<span class="number">#165DFF</span>;<span class="attribute">border-radius</span>:<span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">animation</span>:dotsJump <span class="built_in">var</span>(--speed) <span class="built_in">cubic-bezier</span>(.<span class="number">45</span>,.<span class="number">03</span>,.<span class="number">51</span>,<span class="number">1.4</span>) infinite;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.sanhai-loader</span><span class="selector-class">.dots</span><span class="selector-pseudo">::before</span>{<span class="attribute">animation-delay</span>:.<span class="number">1s</span>;}</span><br><span class="line"><span class="selector-class">.sanhai-loader</span><span class="selector-class">.dots</span><span class="selector-pseudo">::after</span>{<span class="attribute">animation-delay</span>:.<span class="number">2s</span>;}</span><br><span class="line"><span class="keyword">@keyframes</span> dotsJump{<span class="number">0%</span>,<span class="number">80%</span>,<span class="number">100%</span>{<span class="attribute">transform</span>:<span class="built_in">translateY</span>(<span class="number">0</span>) <span class="built_in">scale</span>(<span class="number">1</span>);}<span class="number">40%</span>{<span class="attribute">transform</span>:<span class="built_in">translateY</span>(-<span class="number">12px</span>) <span class="built_in">scale</span>(<span class="number">1.2</span>);}}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sanhai-loader</span><span class="selector-class">.ring</span>{</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">40px</span>;<span class="attribute">height</span>:<span class="number">40px</span>;<span class="attribute">border</span>:<span class="number">4px</span> solid <span class="number">#165DFF</span>;<span class="attribute">border-top-color</span>:transparent;<span class="attribute">border-radius</span>:<span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">animation</span>:ringElastic <span class="built_in">var</span>(--speed) <span class="built_in">cubic-bezier</span>(.<span class="number">68</span>,-.<span class="number">55</span>,.<span class="number">27</span>,<span class="number">1.55</span>) infinite;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">@keyframes</span> ringElastic{<span class="number">0%</span>{<span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">0deg</span>) <span class="built_in">scale</span>(<span class="number">1</span>);}<span class="number">50%</span>{<span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">180deg</span>) <span class="built_in">scale</span>(<span class="number">1.2</span>);}<span class="number">100%</span>{<span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">360deg</span>) <span class="built_in">scale</span>(<span class="number">1</span>);}}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sanhai-loader</span><span class="selector-class">.bar</span>{</span><br><span class="line">  <span class="attribute">display</span>:flex;<span class="attribute">gap</span>:<span class="number">4px</span>;<span class="attribute">height</span>:<span class="number">32px</span>;<span class="attribute">align-items</span>:flex-end;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.sanhai-loader</span><span class="selector-class">.bar</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.sanhai-loader</span><span class="selector-class">.bar</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.sanhai-loader</span><span class="selector-class">.bar</span>{</span><br><span class="line">  <span class="attribute">content</span>:<span class="string">''</span>;<span class="attribute">width</span>:<span class="number">6px</span>;<span class="attribute">height</span>:<span class="number">100%</span>;<span class="attribute">background</span>:<span class="number">#165DFF</span>;<span class="attribute">border-radius</span>:<span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">animation</span>:barElastic <span class="built_in">var</span>(--speed) <span class="built_in">cubic-bezier</span>(.<span class="number">45</span>,.<span class="number">03</span>,.<span class="number">51</span>,<span class="number">1.4</span>) infinite;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.sanhai-loader</span><span class="selector-class">.bar</span><span class="selector-pseudo">::before</span>{<span class="attribute">animation-delay</span>:.<span class="number">1s</span>;}</span><br><span class="line"><span class="selector-class">.sanhai-loader</span><span class="selector-class">.bar</span><span class="selector-pseudo">::after</span>{<span class="attribute">animation-delay</span>:.<span class="number">2s</span>;}</span><br><span class="line"><span class="keyword">@keyframes</span> barElastic{<span class="number">0%</span>,<span class="number">80%</span>,<span class="number">100%</span>{<span class="attribute">height</span>:<span class="number">20%</span>;}<span class="number">40%</span>{<span class="attribute">height</span>:<span class="number">100%</span>;}}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sanhai-loader</span><span class="selector-class">.pulse</span>{</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">40px</span>;<span class="attribute">height</span>:<span class="number">40px</span>;<span class="attribute">background</span>:<span class="number">#165DFF</span>;<span class="attribute">border-radius</span>:<span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">animation</span>:pulseElastic <span class="built_in">var</span>(--speed) <span class="built_in">cubic-bezier</span>(.<span class="number">68</span>,-.<span class="number">55</span>,.<span class="number">27</span>,<span class="number">1.55</span>) infinite;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">@keyframes</span> pulseElastic{<span class="number">0%</span>{<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">0.95</span>);<span class="attribute">opacity</span>:<span class="number">1</span>;}<span class="number">50%</span>{<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1.3</span>);<span class="attribute">opacity</span>:<span class="number">0.7</span>;}<span class="number">100%</span>{<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">0.95</span>);<span class="attribute">opacity</span>:<span class="number">1</span>;}}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sanhai-loader</span><span class="selector-class">.orbit</span>{</span><br><span class="line">  <span class="attribute">position</span>:relative;<span class="attribute">width</span>:<span class="number">40px</span>;<span class="attribute">height</span>:<span class="number">40px</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.sanhai-loader</span><span class="selector-class">.orbit</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.sanhai-loader</span><span class="selector-class">.orbit</span><span class="selector-pseudo">::after</span>{</span><br><span class="line">  <span class="attribute">content</span>:<span class="string">''</span>;<span class="attribute">position</span>:absolute;<span class="attribute">top</span>:<span class="number">0</span>;<span class="attribute">left</span>:<span class="number">0</span>;<span class="attribute">width</span>:<span class="number">100%</span>;<span class="attribute">height</span>:<span class="number">100%</span>;<span class="attribute">border</span>:<span class="number">3px</span> solid <span class="number">#165DFF</span>;<span class="attribute">border-radius</span>:<span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">animation</span>:orbitElastic <span class="built_in">var</span>(--speed) <span class="built_in">cubic-bezier</span>(.<span class="number">45</span>,.<span class="number">03</span>,.<span class="number">51</span>,<span class="number">1.4</span>) infinite;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.sanhai-loader</span><span class="selector-class">.orbit</span><span class="selector-pseudo">::after</span>{<span class="attribute">animation-delay</span>:.<span class="number">2s</span>;<span class="attribute">border-color</span>:<span class="number">#14C4D9</span>;}</span><br><span class="line"><span class="keyword">@keyframes</span> orbitElastic{<span class="number">0%</span>{<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">opacity</span>:<span class="number">1</span>;}<span class="number">50%</span>{<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">0.3</span>);<span class="attribute">opacity</span>:<span class="number">0</span>;}<span class="number">100%</span>{<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">opacity</span>:<span class="number">1</span>;}}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sanhai-loader</span><span class="selector-class">.text</span>{</span><br><span class="line">  <span class="attribute">font-size</span>:<span class="number">20px</span>;<span class="attribute">font-weight</span>:<span class="number">600</span>;<span class="attribute">color</span>:<span class="number">#165DFF</span>;<span class="attribute">letter-spacing</span>:<span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">animation</span>:textElastic <span class="built_in">var</span>(--speed) <span class="built_in">cubic-bezier</span>(.<span class="number">68</span>,-.<span class="number">55</span>,.<span class="number">27</span>,<span class="number">1.55</span>) infinite;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">@keyframes</span> textElastic{<span class="number">0%</span>,<span class="number">100%</span>{<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);}<span class="number">50%</span>{<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1.15</span>);}}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sanhai-loader</span><span class="selector-class">.arc</span>{</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">40px</span>;<span class="attribute">height</span>:<span class="number">40px</span>;<span class="attribute">background</span>:transparent;</span><br><span class="line">  <span class="attribute">background-image</span>:<span class="built_in">url</span>(<span class="string">"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath d='M24 4 A20 20 0 1 1 24 44' stroke='%23165DFF' stroke-width='4' fill='none' stroke-linecap='round' stroke-dasharray='94.2' stroke-dashoffset='94.2'/%3E%3C/svg%3E"</span>);</span><br><span class="line">  <span class="attribute">animation</span>:arcElastic <span class="built_in">var</span>(--speed) <span class="built_in">cubic-bezier</span>(.<span class="number">68</span>,-.<span class="number">55</span>,.<span class="number">27</span>,<span class="number">1.55</span>) infinite;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">@keyframes</span> arcElastic{<span class="number">0%</span>{<span class="attribute">stroke-dashoffset</span>:<span class="number">94.2</span>;<span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">0deg</span>);}<span class="number">50%</span>{<span class="attribute">stroke-dashoffset</span>:<span class="number">0</span>;<span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">540deg</span>);}<span class="number">100%</span>{<span class="attribute">stroke-dashoffset</span>:<span class="number">94.2</span>;<span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">1080deg</span>);}}</span><br></pre></td></tr></tbody></table></figure><h3 id="✅-五、启用-后台配置"><a href="#✅-五、启用-后台配置" class="headerlink" title="✅ 五、启用 &amp; 后台配置"></a>✅ 五、启用 &amp; 后台配置</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hydrooj addon add /root/addon/sanhai-loading</span><br><span class="line">pm2 restart hydrooja</span><br></pre></td></tr></tbody></table></figure><p>进入 <strong>管理后台 → 系统 → 配置</strong>，新增两项：</p><table><thead><tr><th>键</th><th>值</th><th>说明</th></tr></thead><tbody><tr><td><code>sanhai_loading_type</code></td><td><code>dots</code> / <code>ring</code> / <code>bar</code> / <code>pulse</code> / <code>orbit</code> / <code>text</code> / <code>arc</code></td><td>7 款动画可选</td></tr><tr><td><code>sanhai_loading_speed</code></td><td><code>0.5</code> ~ <code>3</code>（秒）</td><td>实时调速</td></tr></tbody></table><p>刷新任意页面 → 官方 <code>partials/loading.html</code> 已被插件替换，<strong>升级无损</strong>。</p><h1 id="适用选择页面"><a href="#适用选择页面" class="headerlink" title="适用选择页面"></a>适用选择页面</h1><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>SanhaiOJ 加载动画实验室（白底完整）<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-pseudo">:root</span>{<span class="attr">--speed</span>:<span class="number">1s</span>;<span class="attr">--accent</span>:<span class="number">#165DFF</span>;}</span></span><br><span class="line"><span class="language-css">    *{<span class="attribute">box-sizing</span>:border-box;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">padding</span>:<span class="number">0</span>;}</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">body</span>{</span></span><br><span class="line"><span class="language-css">      <span class="attribute">min-height</span>:<span class="number">100vh</span>;<span class="attribute">display</span>:flex;<span class="attribute">flex-direction</span>:column;<span class="attribute">align-items</span>:center;<span class="attribute">justify-content</span>:center;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>:<span class="number">#ffffff</span>;<span class="attribute">font-family</span>:-apple-system,BlinkMacSystemFont,<span class="string">"Segoe UI"</span>,Roboto,<span class="string">"Helvetica Neue"</span>,Arial,sans-serif;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>:<span class="number">40px</span> <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">    }</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">header</span>{<span class="attribute">font-size</span>:<span class="number">24px</span>;<span class="attribute">font-weight</span>:<span class="number">600</span>;<span class="attribute">margin-bottom</span>:<span class="number">24px</span>;<span class="attribute">color</span>:<span class="number">#165DFF</span>;}</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="comment">/* 速度滑块 */</span></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.control-bar</span>{<span class="attribute">margin-bottom</span>:<span class="number">24px</span>;<span class="attribute">font-size</span>:<span class="number">14px</span>;<span class="attribute">color</span>:<span class="number">#4e5969</span>;<span class="attribute">display</span>:flex;<span class="attribute">align-items</span>:center;<span class="attribute">gap</span>:<span class="number">8px</span>;}</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">input</span><span class="selector-attr">[type=<span class="string">"range"</span>]</span>{<span class="attribute">width</span>:<span class="number">160px</span>;<span class="attribute">cursor</span>:pointer;}</span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#speedValue</span>{<span class="attribute">display</span>:inline-block;<span class="attribute">width</span>:<span class="number">40px</span>;<span class="attribute">text-align</span>:center;<span class="attribute">font-weight</span>:<span class="number">600</span>;<span class="attribute">color</span>:<span class="number">#165DFF</span>;}</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="comment">/* 容器布局（原排列方式） */</span></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.container</span>{<span class="attribute">display</span>:flex;<span class="attribute">gap</span>:<span class="number">24px</span>;<span class="attribute">flex-wrap</span>:wrap;<span class="attribute">justify-content</span>:center;}</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="comment">/* 卡片样式（白底） */</span></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.card</span>{</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>:<span class="number">160px</span>;<span class="attribute">height</span>:<span class="number">160px</span>;<span class="attribute">border-radius</span>:<span class="number">8px</span>;<span class="attribute">background</span>:<span class="number">#f7f8fa</span>;<span class="attribute">border</span>:<span class="number">1px</span> solid <span class="number">#e5e6eb</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>:flex;<span class="attribute">flex-direction</span>:column;<span class="attribute">align-items</span>:center;<span class="attribute">justify-content</span>:center;<span class="attribute">cursor</span>:pointer;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">transition</span>:transform .<span class="number">25s</span> ease,box-shadow .<span class="number">25s</span> ease;</span></span><br><span class="line"><span class="language-css">    }</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.card</span><span class="selector-pseudo">:hover</span>{<span class="attribute">transform</span>:<span class="built_in">translateY</span>(-<span class="number">4px</span>);<span class="attribute">box-shadow</span>:<span class="number">0</span> <span class="number">4px</span> <span class="number">12px</span> <span class="built_in">rgba</span>(<span class="number">22</span>,<span class="number">93</span>,<span class="number">255</span>,.<span class="number">15</span>);}</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.label</span>{<span class="attribute">margin-top</span>:<span class="number">8px</span>;<span class="attribute">font-size</span>:<span class="number">13px</span>;<span class="attribute">color</span>:<span class="number">#4e5969</span>;}</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="comment">/* 动画集合（确保元素可见） */</span></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.dots</span>{<span class="attribute">display</span>:flex;<span class="attribute">gap</span>:<span class="number">8px</span>;}</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.dots</span> <span class="selector-tag">span</span>{<span class="attribute">width</span>:<span class="number">10px</span>;<span class="attribute">height</span>:<span class="number">10px</span>;<span class="attribute">background</span>:<span class="number">#165DFF</span>;<span class="attribute">border-radius</span>:<span class="number">50%</span>;<span class="attribute">animation</span>:dotsJump <span class="built_in">var</span>(--speed) <span class="built_in">cubic-bezier</span>(.<span class="number">45</span>,.<span class="number">03</span>,.<span class="number">51</span>,<span class="number">1.4</span>) infinite;}</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.dots</span> <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>){<span class="attribute">animation-delay</span>:.<span class="number">1s</span>;}</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.dots</span> <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>){<span class="attribute">animation-delay</span>:.<span class="number">2s</span>;}</span></span><br><span class="line"><span class="language-css">    <span class="keyword">@keyframes</span> dotsJump{<span class="number">0%</span>,<span class="number">80%</span>,<span class="number">100%</span>{<span class="attribute">transform</span>:<span class="built_in">translateY</span>(<span class="number">0</span>) <span class="built_in">scale</span>(<span class="number">1</span>);}<span class="number">40%</span>{<span class="attribute">transform</span>:<span class="built_in">translateY</span>(-<span class="number">12px</span>) <span class="built_in">scale</span>(<span class="number">1.2</span>);}}</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.ring</span>{<span class="attribute">width</span>:<span class="number">40px</span>;<span class="attribute">height</span>:<span class="number">40px</span>;<span class="attribute">border</span>:<span class="number">4px</span> solid <span class="number">#165DFF</span>;<span class="attribute">border-top-color</span>:transparent;<span class="attribute">border-radius</span>:<span class="number">50%</span>;<span class="attribute">animation</span>:ringElastic <span class="built_in">var</span>(--speed) <span class="built_in">cubic-bezier</span>(.<span class="number">68</span>,-.<span class="number">55</span>,.<span class="number">27</span>,<span class="number">1.55</span>) infinite;}</span></span><br><span class="line"><span class="language-css">    <span class="keyword">@keyframes</span> ringElastic{<span class="number">0%</span>{<span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">0deg</span>) <span class="built_in">scale</span>(<span class="number">1</span>);}<span class="number">50%</span>{<span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">180deg</span>) <span class="built_in">scale</span>(<span class="number">1.2</span>);}<span class="number">100%</span>{<span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">360deg</span>) <span class="built_in">scale</span>(<span class="number">1</span>);}}</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.bar</span>{<span class="attribute">display</span>:flex;<span class="attribute">gap</span>:<span class="number">4px</span>;<span class="attribute">height</span>:<span class="number">32px</span>;<span class="attribute">align-items</span>:flex-end;}</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.bar</span> <span class="selector-tag">span</span>{<span class="attribute">width</span>:<span class="number">6px</span>;<span class="attribute">height</span>:<span class="number">100%</span>;<span class="attribute">background</span>:<span class="number">#165DFF</span>;<span class="attribute">border-radius</span>:<span class="number">3px</span>;<span class="attribute">animation</span>:barElastic <span class="built_in">var</span>(--speed) <span class="built_in">cubic-bezier</span>(.<span class="number">45</span>,.<span class="number">03</span>,.<span class="number">51</span>,<span class="number">1.4</span>) infinite;}</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.bar</span> <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>){<span class="attribute">animation-delay</span>:.<span class="number">1s</span>;}</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.bar</span> <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>){<span class="attribute">animation-delay</span>:.<span class="number">2s</span>;}</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.bar</span> <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>){<span class="attribute">animation-delay</span>:.<span class="number">3s</span>;}</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.bar</span> <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child</span>(<span class="number">5</span>){<span class="attribute">animation-delay</span>:.<span class="number">4s</span>;}</span></span><br><span class="line"><span class="language-css">    <span class="keyword">@keyframes</span> barElastic{<span class="number">0%</span>,<span class="number">80%</span>,<span class="number">100%</span>{<span class="attribute">height</span>:<span class="number">20%</span>;}<span class="number">40%</span>{<span class="attribute">height</span>:<span class="number">100%</span>;}}</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.pulse</span>{<span class="attribute">width</span>:<span class="number">40px</span>;<span class="attribute">height</span>:<span class="number">40px</span>;<span class="attribute">background</span>:<span class="number">#165DFF</span>;<span class="attribute">border-radius</span>:<span class="number">50%</span>;<span class="attribute">animation</span>:pulseElastic <span class="built_in">var</span>(--speed) <span class="built_in">cubic-bezier</span>(.<span class="number">68</span>,-.<span class="number">55</span>,.<span class="number">27</span>,<span class="number">1.55</span>) infinite;}</span></span><br><span class="line"><span class="language-css">    <span class="keyword">@keyframes</span> pulseElastic{<span class="number">0%</span>{<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">0.95</span>);<span class="attribute">opacity</span>:<span class="number">1</span>;}<span class="number">50%</span>{<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1.3</span>);<span class="attribute">opacity</span>:<span class="number">0.7</span>;}<span class="number">100%</span>{<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">0.95</span>);<span class="attribute">opacity</span>:<span class="number">1</span>;}}</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.orbit</span>{<span class="attribute">position</span>:relative;<span class="attribute">width</span>:<span class="number">40px</span>;<span class="attribute">height</span>:<span class="number">40px</span>;}</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.orbit</span><span class="selector-pseudo">::before</span>,<span class="selector-class">.orbit</span><span class="selector-pseudo">::after</span>{<span class="attribute">content</span>:<span class="string">''</span>;<span class="attribute">position</span>:absolute;<span class="attribute">top</span>:<span class="number">0</span>;<span class="attribute">left</span>:<span class="number">0</span>;<span class="attribute">width</span>:<span class="number">100%</span>;<span class="attribute">height</span>:<span class="number">100%</span>;<span class="attribute">border</span>:<span class="number">3px</span> solid <span class="number">#165DFF</span>;<span class="attribute">border-radius</span>:<span class="number">50%</span>;<span class="attribute">animation</span>:orbitElastic <span class="built_in">var</span>(--speed) <span class="built_in">cubic-bezier</span>(.<span class="number">45</span>,.<span class="number">03</span>,.<span class="number">51</span>,<span class="number">1.4</span>) infinite;}</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.orbit</span><span class="selector-pseudo">::after</span>{<span class="attribute">animation-delay</span>:.<span class="number">2s</span>;<span class="attribute">border-color</span>:<span class="number">#14C4D9</span>;}</span></span><br><span class="line"><span class="language-css">    <span class="keyword">@keyframes</span> orbitElastic{<span class="number">0%</span>{<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">opacity</span>:<span class="number">1</span>;}<span class="number">50%</span>{<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">0.3</span>);<span class="attribute">opacity</span>:<span class="number">0</span>;}<span class="number">100%</span>{<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);<span class="attribute">opacity</span>:<span class="number">1</span>;}}</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.text</span>{<span class="attribute">font-size</span>:<span class="number">20px</span>;<span class="attribute">font-weight</span>:<span class="number">600</span>;<span class="attribute">color</span>:<span class="number">#165DFF</span>;<span class="attribute">letter-spacing</span>:<span class="number">2px</span>;<span class="attribute">animation</span>:textElastic <span class="built_in">var</span>(--speed) <span class="built_in">cubic-bezier</span>(.<span class="number">68</span>,-.<span class="number">55</span>,.<span class="number">27</span>,<span class="number">1.55</span>) infinite;}</span></span><br><span class="line"><span class="language-css">    <span class="keyword">@keyframes</span> textElastic{<span class="number">0%</span>,<span class="number">100%</span>{<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1</span>);}<span class="number">50%</span>{<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">1.15</span>);}}</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.arc</span> <span class="selector-tag">svg</span>{<span class="attribute">animation</span>:arcElastic <span class="built_in">var</span>(--speed) <span class="built_in">cubic-bezier</span>(.<span class="number">68</span>,-.<span class="number">55</span>,.<span class="number">27</span>,<span class="number">1.55</span>) infinite;}</span></span><br><span class="line"><span class="language-css">    <span class="keyword">@keyframes</span> arcElastic{<span class="number">0%</span>{<span class="attribute">stroke-dashoffset</span>:<span class="number">94.2</span>;<span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">0deg</span>);}<span class="number">50%</span>{<span class="attribute">stroke-dashoffset</span>:<span class="number">0</span>;<span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">540deg</span>);}<span class="number">100%</span>{<span class="attribute">stroke-dashoffset</span>:<span class="number">94.2</span>;<span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">1080deg</span>);}}</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> root=<span class="variable language_">document</span>.<span class="property">documentElement</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> range=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">'speedRange'</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> value=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">'speedValue'</span>);</span></span><br><span class="line"><span class="language-javascript">    range.<span class="property">oninput</span>=<span class="function">()=&gt;</span>{</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> v=<span class="built_in">parseFloat</span>(range.<span class="property">value</span>).<span class="title function_">toFixed</span>(<span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">      root.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">'--speed'</span>,v+<span class="string">'s'</span>);</span></span><br><span class="line"><span class="language-javascript">      value.<span class="property">textContent</span>=v;</span></span><br><span class="line"><span class="language-javascript">    };</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">header</span>&gt;</span>SanhaiOJ 加载动画实验室（白底完整）<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"control-bar"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"speedRange"</span>&gt;</span>速度：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"range"</span> <span class="attr">id</span>=<span class="string">"speedRange"</span> <span class="attr">min</span>=<span class="string">"0.5"</span> <span class="attr">max</span>=<span class="string">"3"</span> <span class="attr">step</span>=<span class="string">"0.1"</span> <span class="attr">value</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"speedValue"</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1. 点跳 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card"</span> <span class="attr">data-anim</span>=<span class="string">"dots"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"dots"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"label"</span>&gt;</span>Dots<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 2. 圆环 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card"</span> <span class="attr">data-anim</span>=<span class="string">"ring"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"ring"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"label"</span>&gt;</span>Ring<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 3. 柱状 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card"</span> <span class="attr">data-anim</span>=<span class="string">"bar"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bar"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"label"</span>&gt;</span>Bar<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 4. 脉冲 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card"</span> <span class="attr">data-anim</span>=<span class="string">"pulse"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pulse"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"label"</span>&gt;</span>Pulse<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 5. 轨道 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card"</span> <span class="attr">data-anim</span>=<span class="string">"orbit"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"orbit"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"label"</span>&gt;</span>Orbit<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 6. 文字 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card"</span> <span class="attr">data-anim</span>=<span class="string">"text"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>SanhaiOJ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"label"</span>&gt;</span>Text<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 7. 弧形回旋 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card"</span> <span class="attr">data-anim</span>=<span class="string">"arc"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"arc"</span>&gt;</span><span class="tag">&lt;<span class="name">svg</span> <span class="attr">width</span>=<span class="string">"48"</span> <span class="attr">height</span>=<span class="string">"48"</span> <span class="attr">viewBox</span>=<span class="string">"0 0 48 48"</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">"M24 4 A20 20 0 1 1 24 44"</span> <span class="attr">stroke</span>=<span class="string">"#165DFF"</span> <span class="attr">stroke-width</span>=<span class="string">"4"</span> <span class="attr">fill</span>=<span class="string">"none"</span> <span class="attr">stroke-linecap</span>=<span class="string">"round"</span> <span class="attr">stroke-dasharray</span>=<span class="string">"94.2"</span> <span class="attr">stroke-dashoffset</span>=<span class="string">"94.2"</span>/&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"label"</span>&gt;</span>Arc<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> root=<span class="variable language_">document</span>.<span class="property">documentElement</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> range=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">'speedRange'</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> value=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">'speedValue'</span>);</span></span><br><span class="line"><span class="language-javascript">    range.<span class="property">oninput</span>=<span class="function">()=&gt;</span>{</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> v=<span class="built_in">parseFloat</span>(range.<span class="property">value</span>).<span class="title function_">toFixed</span>(<span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">      root.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">'--speed'</span>,v+<span class="string">'s'</span>);</span></span><br><span class="line"><span class="language-javascript">      value.<span class="property">textContent</span>=v;</span></span><br><span class="line"><span class="language-javascript">    };</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;✅-一、插件目录（官方结构）&quot;&gt;&lt;a href=&quot;#✅-一、插件目录（官方结构）&quot; class=&quot;headerlink&quot; title=&quot;✅ 一、插件目录（官方结构）&quot;&gt;&lt;/a&gt;✅ 一、插件目录（官方结构）&lt;/h3&gt;&lt;figure class=&quot;highlight </summary>
      
    
    
    
    <category term="插件" scheme="http://example.com/categories/%E6%8F%92%E4%BB%B6/"/>
    
    <category term="OJ" scheme="http://example.com/categories/%E6%8F%92%E4%BB%B6/OJ/"/>
    
    
    <category term="SanhaiOJ加载动画" scheme="http://example.com/tags/SanhaiOJ%E5%8A%A0%E8%BD%BD%E5%8A%A8%E7%94%BB/"/>
    
  </entry>
  
  <entry>
    <title>Sam的打字计划 - 题解</title>
    <link href="http://example.com/2025/11/27/Sam%E7%9A%84%E6%89%93%E5%AD%97%E8%AE%A1%E5%88%92/"/>
    <id>http://example.com/2025/11/27/Sam%E7%9A%84%E6%89%93%E5%AD%97%E8%AE%A1%E5%88%92/</id>
    <published>2025-11-27T08:12:26.000Z</published>
    <updated>2025-11-30T06:23:56.911Z</updated>
    
    <content type="html"><![CDATA[<h2 id="T4-Sam的打字计划-题解"><a href="#T4-Sam的打字计划-题解" class="headerlink" title="T4 Sam的打字计划 - 题解"></a>T4 Sam的打字计划 - 题解</h2><p>一看数据就知道可以搜，但是暴力搜索有 $O(9^9)$ 直接 $TLE$ 了。</p><p>但是这道题是<strong>没有办法</strong>进行剪枝或者优化的，那么其实虽然是搜索，但本质是枚举。</p><p>枚举所有方案有个优化，叫<strong>折半搜索</strong>，标准的空间换时间的思路。</p><p>先枚举前 $5$ 个数字会导致的所有局面，再枚举后 $5$ 个数字会导致的所有局面。</p><p>上下匹配就可以将复杂度降低到 $O(2\times9^5)$。</p><p>当然这道题还有第二种做法：</p><p>将这个 $5\times4$ 的方格分成 $13$ 个区块：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1  2  2  3</span><br><span class="line">4  .  .  5</span><br><span class="line">6  7  7  8</span><br><span class="line">9  .  .  10</span><br><span class="line">11 12 12 13</span><br></pre></td></tr></tbody></table></figure><p>每个区块的覆盖次数为 $a[i]$。</p><p>不难发现 $a[13]$ 所有数字都会用，而 $a[1]$ 只有 $1$ 不会用，所以 $cnt[1]=a[13]-a[1]$。</p><p>同理：</p><ul><li>$a[6]$ 只有 $1,7$ 不用，那么 $a[6]=a[13]-cnt[1]-cnt[7]$，即 $cnt[7]=a[13]-a[6]-cnt[1]$。</li><li>$a[2]$ 只有 $1,4$ 不用，那么 $a[2]=a[13]-cnt[1]-cnt[4]$，即 $cnt[4]=a[13]-a[2]-cnt[1]$。</li><li>$a[10]$ 只有 $2$ 不用，那么 $a[10]=a[13]-cnt[2]$，即 $cnt[2]=a[13]-a[10]$。</li><li>$a[4]$ 只有 $1,2,3,7$ 不用，那么 $a[4]=a[13]-cnt[1]-cnt[2]-cnt[3]-cnt[7]$，解得 $cnt[3]$。</li><li>$a[7]$ 只有  $1,7,0$ 不用，解得 $cnt[0]$。</li></ul><p>综上，$cnt[1],cnt[2],cnt[3],cnt[4],cnt[7],cnt[0]$ 可以直接算出。接下来只需要计算 $5,6,8,9$。</p><p>$a[5]$ 只有 $5,6$ 不用，解得 $cnt[5]+cnt[6]$ 的值，设为 $x$。</p><p>$a[9]$ 只有 $2,6,8,0$ 会用，即 $a[9]=cnt[2]+cnt[6]+cnt[8]+cnt[0]$，解得 $cnt[6]+cnt[8]$，设为 $y$。</p><p>又因为 $cnt[5]+cnt[6]+cnt[8]+cnt[9]=a[13]-cnt[1]-cnt[2]-cnt[3]-cnt[4]-cnt[7]-cnt[0]$，设为 $z$，所以我们现在有三个方程四个未知数。</p><p>要让 $cnt[5]$ 最小，则最大化 $cnt[6]$，而 $cnt[6]=x+y-z+cnt[9]$，则 $\max{cnt[6]}=\min(9,\min(x+y-z+9,min(x,y)))$。</p><p>再利用之前的 $x,y,z$ 可解得所有数字的个数。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;T4-Sam的打字计划-题解&quot;&gt;&lt;a href=&quot;#T4-Sam的打字计划-题解&quot; class=&quot;headerlink&quot; title=&quot;T4 Sam的打字计划 - 题解&quot;&gt;&lt;/a&gt;T4 Sam的打字计划 - 题解&lt;/h2&gt;&lt;p&gt;一看数据就知道可以搜，但是暴力搜索有</summary>
      
    
    
    
    <category term="题解" scheme="http://example.com/categories/%E9%A2%98%E8%A7%A3/"/>
    
    
    <category term="题解" scheme="http://example.com/tags/%E9%A2%98%E8%A7%A3/"/>
    
  </entry>
  
</feed>
